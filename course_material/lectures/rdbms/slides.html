<html>
<head>
<title>Relational Database Management Systems</title>
<link href='lib/slides.css' rel='stylesheet' type='text/css'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
<link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet'>
<link href='lib/prism.css' rel='stylesheet'>
<script src='lib/sg.js'></script>
</head>
<body>
 <DIV class='slideCl1' id="s0"  >
<div class='navCl1'><a href="#s1"><span class='nextArrowCl'>>></span></a> </div> <div class='heading'>Relational Database Management Systems</div><p><ul class='indexUl'  style='font-size: 0.7em;'><li class="i"> <a href="#s1">What is an RDBMS?</a>
<li class="i"> <a href="#s2">RDBMSs in COMP3311</a>
<li class="i"> <a href="#s3">PostgreSQL Architecture</a>
<li class="i"> <a href="#s4">SQLite Architecture</a>
<li class="i"> <a href="#s5">Using PostgreSQL in CSE</a>
<li class="i"> <a href="#s7">Managing Databases</a>
<li class="i"> <a href="#s8">Managing Tables</a>
<li class="i"> <a href="#s9">Managing Tuples</a>
<li class="i"> <a href="#s10">Table Definition Example</a>
<li class="i"> <a href="#s11">Exercise: Creating/Populating Databases</a>
<li class="i"> <a href="#s12">Managing Other DB Objects</a>
</ul></DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [0/12]</div> <DIV class='slideCl1    ' id="s1"  >
<div class='navCl1'> <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s2"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; What is an RDBMS?</div></td><td align='right'></td></tr></table>
<p>
A <font color='#0000BB'>relational database management system</font> (RDBMS) is
<small>
<ul>
<li> software designed to support large-scale data-intensive applications
<li> allowing high-level description of data (tables, constraints)
<li> with high-level access to the data (relational model, SQL)
<li> providing efficient storage and retrieval (disk/memory management)
<li> supporting multiple simultaneous users  (privilege, protection)
<li> doing multiple simultaneous operations (transactions, concurrency)
<li> maintaining reliable access to the stored data (backup, recovery)
</ul>
</small>
Note: databases provide <font color='#0000BB'>persistent</font> storage of information
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [1/12]</div> <DIV class='slideCl1    ' id="s2"  >
<div class='navCl1'><a href="#s1"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s3"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; RDBMSs in COMP3311</div></td><td align='right'></td></tr></table>
<p>
PostgreSQL
<ul>
<li> full-featured, client-server DBMS, resource intensive
<li> applications communicate via server to DB
<li> can run distributed and replicated
<li> follows SQL standard closely, but not totally
<li> extra data types (e.g. JSON), multiple procedural languages
</ul>
SQLite
<ul>
<li> full-featured, serverless DBMS, light user of resources
<li> intended to be embedded in applications
<li> follows SQL standard closely, but not totally
<li> no stored procedures, add functions by embedding in apps
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [2/12]</div> <DIV class='slideCl1    ' id="s3"  >
<div class='navCl1'><a href="#s2"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s4"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; PostgreSQL Architecture</div></td><td align='right'></td></tr></table>
<p>
PostgreSQL's client-server architecture:
<p><br>
<p><div align='center'>
<img alt="[Diagram:Pics/dbms/pgarch.png]" src="Pics/dbms/pgarch.png">
</div><p>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [3/12]</div> <DIV class='slideCl1    ' id="s4"  >
<div class='navCl1'><a href="#s3"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s5"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; SQLite Architecture</div></td><td align='right'></td></tr></table>
<p>
SQLite's serverless architecture:
<p><br>
<p><div align='center'>
<img alt="[Diagram:Pics/dbms/sqarch.png]" src="Pics/dbms/sqarch.png">
</div><p>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [4/12]</div> <DIV class='slideCl1    ' id="s5"  >
<div class='navCl1'><a href="#s4"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s6"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Using PostgreSQL in CSE</div></td><td align='right'></td></tr></table>
<p>
Using your PostgreSQL server in CSE <small>(once installed)</small>:
<ul>
<li> login to <tt>grieg</tt>, set up environment, start server
<li> use <tt>psql</tt>, etc. to manipulate databases
<li> stop server, log off <tt>grieg</tt>
</ul>
<p><pre>
wagner$ ssh <i>YOU</i>@grieg
grieg$ source /srvr/<i>YOU</i>/env
grieg$ pg start
grieg$ psql <i>myDatabase</i>
<span class='comment'>... do stuff with your database ...</span>
grieg$ pg stop
grieg$ exit
</pre><p>
Need to run the command &nbsp;<large><code>priv srvr</code></large>&nbsp; once before the above will work
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [5/12]</div> <DIV class='slideCl1    ' id="s6"  >
<div class='navCl1'><a href="#s5"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s7"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Using PostgreSQL in CSE <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
PostgreSQL files <small>(helps to understand state of server)</small>
<ul>
<li> PostgreSQL environment settings ... <large><code>/srvr/<i>YOU</i>/env</code></large>
<li> PostgreSQL home directory ... <large><code>/srvr/<i>YOU</i>/pgsql/</code></large>
<li> under the home directory ...
<ul>
<li> <large><code>postgresql.conf</code></large> ... main configuration file
<li> <large><code>base/</code></large> ... subdirectories containing database files
<li> <large><code>postmaster.pid</code></large> ... process ID of server process
<li> <large><code>.s.PGSQL.5432</code></large> ... socket for clients to connect to server
<li> <large><code>.s.PGSQL.5432.lock</code></large> ... lock file for socket
<li> <large><code>Log</code></large> ... log file to monitor server errors, etc.
</ul>
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [6/12]</div> <DIV class='slideCl1    ' id="s7"  >
<div class='navCl1'><a href="#s6"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s8"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Managing Databases</div></td><td align='right'></td></tr></table>
<p>
Shell commands to create/remove databases:
<ul>
<li> <large><font color="#008800"><b><code>createdb</code></b></font></large> <i>dbname</i> ... create a new totally empty database
<li> <large><font color="#008800"><b><code>dropdb</code></b></font></large> <i>dbname</i> ... remove <i>all</i> data associated with a DB
</ul>
<small>(If no <i>dbname</i> supplied, assumes a database called <i>YOU</i>&nbsp;)</small>
<p>
Shell commands to dump/restore database contents:
<ul>
<li> <large><font color="#008800"><b><code>pg_dump</code></b></font></large> <i>dbname</i> <large><font color="#008800"><b><code>&gt;</code></b></font></large> <i>dumpfile</i>
<li> <large><font color="#008800"><b><code>psql</code></b></font></large> <i>dbname</i> <large><font color="#008800"><b><code>-f</code></b></font></large> <i>dumpfile</i>
</ul>
<small>(Database <i>dbname</i> is typically created just before restore)</small>
<p>
<small>
Main SQL statements in <i>dumpfile</i>:
&nbsp;&nbsp;<large><font color="#008800"><b><code>CREATE TABLE</code></b></font></large>, &nbsp;&nbsp; <large><font color="#008800"><b><code>ALTER TABLE</code></b></font></large>, &nbsp;&nbsp; <large><font color="#008800"><b><code>COPY</code></b></font></large>
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [7/12]</div> <DIV class='slideCl1    ' id="s8"  >
<div class='navCl1'><a href="#s7"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s9"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Managing Tables</div></td><td align='right'></td></tr></table>
<p>
SQL statements:
<ul>
<li> <large><font color="#008800"><b><code>CREATE TABLE</code></b></font></large> &nbsp;<i>table</i> <large><font color="#008800"><b><code>(</code></b></font></large> <i>Attributes+Constraints</i> <large><font color="#008800"><b><code>)</code></b></font></large>
<li> <large><font color="#008800"><b><code>ALTER TABLE</code></b></font></large> &nbsp;<i>table</i> &nbsp;<i>TableSchemaChanges</i>
<li> <large><font color="#008800"><b><code>DROP TABLE</code></b></font></large> &nbsp;<i>table(s)</i>&nbsp; [ <large><font color="#008800"><b><code>CASCADE</code></b></font></large> ]
<li> <large><font color="#008800"><b><code>TRUNCATE TABLE</code></b></font></large> &nbsp;<i>table(s)</i>&nbsp; [ <large><font color="#008800"><b><code>CASCADE</code></b></font></large> ]
</ul>
<small>(All conform to SQL standard, but all also have extensions)</small>
<p>
<large><code>DROP..CASCADE</code></large> also drops objects which depend on the table
<ul>
<li> objects could be tuples or views, but <i>not</i> whole tables
</ul>
<p>
<large><code>TRUNCATE..CASCADE</code></large> truncates tables which refer to the table
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [8/12]</div> <DIV class='slideCl1    ' id="s9"  >
<div class='navCl1'><a href="#s8"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s10"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Managing Tuples</div></td><td align='right'></td></tr></table>
<p>
SQL statements:
<ul>
<li> <large><font color="#008800"><b><code>INSERT INTO</code></b></font></large> &nbsp;<i>table</i>&nbsp; <large><font color="#008800"><b><code>(</code></b></font></large> <i>Attrs</i> <large><font color="#008800"><b><code>) VALUES</code></b></font></large> &nbsp;<i>Tuple(s)</i>
<li> <large><font color="#008800"><b><code>DELETE FROM</code></b></font></large> &nbsp;<i>table</i>&nbsp; <large><font color="#008800"><b><code>WHERE</code></b></font></large> &nbsp;<i>condition</i>
<li> <large><font color="#008800"><b><code>UPDATE</code></b></font></large> &nbsp;<i>table</i>&nbsp; <large><font color="#008800"><b><code>SET</code></b></font></large> &nbsp;<i>AttrValueChanges</i>&nbsp; <large><font color="#008800"><b><code>WHERE</code></b></font></large> &nbsp;<i>condition</i>
</ul>
<i>Attrs</i> = <large><font color="#008800"><b><code>(</code></b></font></large> <i>attr<sub>1</sub></i><large><font color="#008800"><b><code>,</code></b></font></large>, ... <i>attr<sub>n</sub></i> <large><font color="#008800"><b><code>)</code></b></font></large>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
<i>Tuple</i> = <large><font color="#008800"><b><code>(</code></b></font></large> <i>val<sub>1</sub></i><large><font color="#008800"><b><code>,</code></b></font></large>, ... <i>val<sub>n</sub></i> <large><font color="#008800"><b><code>)</code></b></font></large>
<p>
<i>AttrValueChanges</i> is a comma-separated list of:
<ul>
<li> <i>attrname</i> <large><font color="#008800"><b><code>=</code></b></font></large> <i>expression</i>
</ul>
Each list element assigns a new value to a given attribute.
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [9/12]</div> <DIV class='slideCl1    ' id="s10"  >
<div class='navCl1'><a href="#s9"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s11"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Table Definition Example</div></td><td align='right'></td></tr></table>
<p>
Make a table to hold student data:
<p><pre>
CREATE TABLE Student (
    zid     serial,
    family  varchar(40),
    given   varchar(40) NOT null,
    d_o_b   date NOT NULL,
    gender  char(1) check (gender in ('M','F')),
    degree  integer,
    PRIMARY KEY (zid),
    FOREIGN KEY (degree) REFERENCES Degrees(did)
);
</pre><p>
<br>
<small>
<large><code>serial</code></large> is a special type which automaticall generates unique integer values
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [10/12]</div> <DIV class='slideCl1    ' id="s11"  >
<div class='navCl1'><a href="#s10"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s12"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Exercise: Creating/Populating Databases</div></td><td align='right'></td></tr></table>
<p>
Do the following:
<ul>
<li> create a database called <large><code>ex1</code></large>
<li> create a table <large><code>T</code></large> with two integer fields <large><code>x</code></large> and <large><code>y</code></large>
<li> examine the catalog definition of table <large><code>T</code></large>
<li> use <large><code>insert</code></large> statements to load some tuples 
<li> use <large><code>pg_dump</code></large> to make a copy of the database contents
<li> remove the <large><code>ex1</code></large> database, then restore it from the dump
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [11/12]</div> <DIV class='slideCl1    ' id="s12"  >
<div class='navCl1'><a href="#s11"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>   </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Managing Other DB Objects</div></td><td align='right'></td></tr></table>
<p>
Databases contain objects other than tables and tuples:
<ul>
<li> views, functions, sequences, types, indexes, roles, ...
</ul>
Most have SQL statements for:
<ul>
<li> <large><font color="#008800"><b><code>CREATE</code></b></font></large> &nbsp;<i>ObjectType</i> &nbsp;<i>name</i> ...
<li> <large><font color="#008800"><b><code>DROP</code></b></font></large> &nbsp;<i>ObjectType</i> &nbsp;<i>name</i> ...
</ul>
Views and functions also have available:
<ul>
<li> <large><font color="#008800"><b><code>CREATE OR REPLACE</code></b></font></large> &nbsp;<i>ObjectType</i> &nbsp;<i>name</i> ...
</ul>
<small>
See PostgreSQL documentation Section VI, Chapter I for SQL statement details.
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; RDBMSs &#9826; [12/12]</div><p><hr><p>
<span style='font-size:11px;color: grey;'>Produced: 10 Feb 2021</span>
 <script src='lib/prism.js'></script>   
 <script src='lib/sg.js'></script>   
</body>
</html>
