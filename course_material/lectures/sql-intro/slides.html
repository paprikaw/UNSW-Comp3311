<html>
<head>
<title>SQL Introduction</title>
<link href='lib/slides.css' rel='stylesheet' type='text/css'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
<link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet'>
<link href='lib/prism.css' rel='stylesheet'>
<script src='lib/sg.js'></script>
</head>
<body>
 <DIV class='slideCl1' id="s0"  >
<div class='navCl1'><a href="#s1"><span class='nextArrowCl'>>></span></a> </div> <div class='heading'>SQL Introduction</div><p><ul class='indexUl'  style='font-size: 0.7em;'><li class="i"> <a href="#s1">SQL vs Relational Model</a>
<li class="i"> <a href="#s2">SQL History</a>
<li class="i"> <a href="#s3">SQL Intro</a>
<li class="i"> <a href="#s5">SQL Syntax in a Nutshell</a>
<li class="i"> <a href="#s7">Names in SQL</a>
<li class="i"> <a href="#s8">Types/Constants in SQL</a>
<li class="i"> <a href="#s11">Examples of Defining Domains/Types</a>
<li class="i"> <a href="#s12">Tuple and Set Literals</a>
</ul></DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [0/12]</div> <DIV class='slideCl1    ' id="s1"  >
<div class='navCl1'> <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s2"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; SQL vs Relational Model</div></td><td align='right'></td></tr></table>
<p>
The <font color='#0000BB'>relational model</font> is a formal system for
<ul>
<li> describing data &nbsp; <small>(relations, tuples, attributes, domains, constraints)</small>
<li> manipulating data &nbsp; <small>(relational algebra ... covered elsewhere)</small>
</ul>
<font color='#0000BB'>SQL</font> is a "programming" language for
<ul>
<li> describing data &nbsp; <small>(tables, rows, fields, types, constraints)</small>
<li> manipulating data &nbsp; <small>(query language)</small>
</ul>
SQL extends the relational model in some ways <small>(e.g bags vs sets of tuples)</small>
<p>
SQL omits some aspects of the relational model <small>(e.g. general constraints)</small>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [1/12]</div> <DIV class='slideCl1    ' id="s2"  >
<div class='navCl1'><a href="#s1"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s3"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; SQL History</div></td><td align='right'></td></tr></table>
<p>
Developed at IBM in the mid-1970's (System-R)
<p>
Standardised in 1986, and then in 1989, 1992, 1999, 2003, ... 2019
<p>
Many database management systems (DBMSs) have been built around SQL
<ul>
<li> <small>System-R, Oracle, Ingres, DB2, PostgreSQL, MySQL, SQL-server, SQLite, ...</small>
</ul>
<p>
DBMSs <small>vs</small> the standard
<ul>
<li> all DBMSs implement a subset of the 1999 standard <small>(aka SQL3)</small>
<li> all DBMSs implement proprietary extensions to the standard
</ul>
Conforming to standard should ensure portability of database applications
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [2/12]</div> <DIV class='slideCl1    ' id="s3"  >
<div class='navCl1'><a href="#s2"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s4"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; SQL Intro</div></td><td align='right'></td></tr></table>
<p>
SQL has several sub-languages ...
<ul>
<li> meta-data definition language &nbsp; <small>(e.g. &nbsp;<large><code>create table</code></large>, etc.)</small>
<li> meta-data update language &nbsp; <small>(e.g. &nbsp;<large><code>alter table, drop table</code></large>)</small>
<li> data update language &nbsp; <small>(e.g. &nbsp;<large><code>insert, update, delete</code></large>)</small>
<li> query language &nbsp; <small>(e.g. &nbsp;<large><code>select ... from ... where</code></large>, etc.)</small>
</ul>
Meta-data languages manage the database <font color='#0000BB'>schema</font>
<p>
Data update language manages sets of <font color='#0000BB'>tuples</font>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [3/12]</div> <DIV class='slideCl1    ' id="s4"  >
<div class='navCl1'><a href="#s3"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s5"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; SQL Intro <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Syntax-wise, SQL is similar to other programming languages
<ul>
<li> has keywords, identifiers, constants, operators
<li> but strings are different to most PLs
<small>
<ul>
<li> <large><code>'...'</code></large> are constant strings, e.g. <large><code>'a'</code></large>, <large><code>'abc123'</code></large>, <large><code>'John''s bag'</code></large>
<li> <large><code>"..."</code></large> allow non-alpha chars in identifiers and make id's case-sensitive
</ul>
</small>
</ul>
In the standard, all non-quoted identifiers map to all upper-case
<ul>
<li> e.g. <large><code>BankBranches</code></large> = <large><code>bankbranches</code></large> are treated as <large><code>BANKBRANCHES</code></large>
</ul>
In PostgreSQL, all non-quoted identifiers map to all lower-case
<ul>
<li> e.g. <large><code>BankBranches</code></large> = <large><code>BANKBRANCHES</code></large> are treated as <large><code>bankbranches</code></large>
</ul>
In all standards-adhering DBMSs, different quoted identifiers are different
<ul>
<li> <large><code>"BankBranches"</code></large> &ne; <large><code>"bankbranches"</code></large> &ne; <large><code>"BANKBRANCHES"</code></large>
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [4/12]</div> <DIV class='slideCl1    ' id="s5"  >
<div class='navCl1'><a href="#s4"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s6"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; SQL Syntax in a Nutshell</div></td><td align='right'></td></tr></table>
<p>
SQL definitions, queries and statements are composed of:
<ul>
<li> <font color='#0000BB'>comments</font> ... <large><font color="#008800"><b><code>--</code></b></font></large> comments to end of line
<li> <font color='#0000BB'>identifiers</font> ... similar to regular programming languages
<li> <font color='#0000BB'>keywords</font> ... a large set (e.g. <large><code>CREATE</code></large>, <large><code>DROP</code></large>, <large><code>TABLE</code></large>)
<li> <font color='#0000BB'>data types</font> ... small set of basic types (e.g. <large><code>integer</code></large>, <large><code>date</code></large>)
<li> <font color='#0000BB'>operators</font> ... similar to regular programming languages
<li> <font color='#0000BB'>constants</font> ... similar to regular programming languages
</ul>
<i>Similar</i> means "often the same, but not always" ...
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [5/12]</div> <DIV class='slideCl1    ' id="s6"  >
<div class='navCl1'><a href="#s5"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s7"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; SQL Syntax in a Nutshell <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Comments: everything after <font color="#0000EE"><large><font color="#008800"><b><code>--</code></b></font></large> <i>is a comment</i></font>
<p>
Identifiers: alphanumeric (a la C), but also <large><code>"An Identifier"</code></large>
<p>
Reserved words: many e.g. <large><code>CREATE</code></large>, <large><code>SELECT</code></large>, <large><code>TABLE</code></large>, ...
<p>
Reserved words cannot be used identifiers unless quoted e.g <large><code>"table"</code></large>
<p>
Strings: e.g. <large><code>'a string'</code></large>, &nbsp;<large><code>'don''t ask'</code></large>, &nbsp;but no <large><code>'\n'</code></large>
&nbsp; <small>(use <large><code>e'\n'</code></large>)</small>
<p>
Numbers: like C, e.g. <large><code>1</code></large>, &nbsp;<large><code>-5</code></large>, &nbsp;<large><code>3.14159</code></large>, &nbsp;...
<p>
Types: &nbsp;<large><code>integer</code></large>, &nbsp;<large><code>float</code></large>, &nbsp;<large><code>char(</code></large><i>n</i><large><code>)</code></large>, &nbsp;<large><code>varchar(</code></large><i>n</i><large><code>)</code></large>, &nbsp;<large><code>date</code></large>, ...
<p>
Operators: &nbsp;<large><code>=</code></large>, &nbsp;<large><code>&lt;&gt;</code></large>, &nbsp;<large><code>&lt;</code></large>, &nbsp;<large><code>&lt;=</code></large>, &nbsp;<large><code>&gt;</code></large>, &nbsp;<large><code>&gt;=</code></large>, &nbsp;<large><code>AND</code></large>, &nbsp;<large><code>OR</code></large>, &nbsp;<large><code>NOT</code></large>, ...
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [6/12]</div> <DIV class='slideCl1    ' id="s7"  >
<div class='navCl1'><a href="#s6"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s8"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Names in SQL</div></td><td align='right'></td></tr></table>
<p>
Identifiers denote:
<ul>
<li> database objects such as tables, attributes, views, ...
<li> meta-objects such as types, functions, constraints, ...
</ul>
Naming conventions that I (try to) use in this course:
<ul>
<li> relation names: &nbsp; e.g. <large><code>Branches</code></large>, <large><code>Students</code></large>, ... <small>(use plurals)</small>
<li> attribute names: &nbsp; e.g. <large><code>name</code></large>, <large><code>code</code></large>, <large><code>firstName</code></large>, ...
<li> foreign keys: named after either or both of
<ul>
<li> table being referenced &nbsp; e.g. <large><code>staff</code></large> or <large><code>staff_id</code></large>, ...
<li> relationship being modelled &nbsp; e.g. <large><code>teaches</code></large>, ...
</ul>
</ul>
We initially write SQL keywords in all upper-case in slides.
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [7/12]</div> <DIV class='slideCl1    ' id="s8"  >
<div class='navCl1'><a href="#s7"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s9"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Types/Constants in SQL</div></td><td align='right'></td></tr></table>
<p>
Numeric types: <large><code>INTEGER</code></large>, <large><code>REAL</code></large>,
	<large><code>NUMERIC(</code></large><i>w</i><large><code>,</code></large><i>d</i><large><code>)</code></large>
<p><pre>
10    -1    3.14159    2e-5    6.022e23 
</pre><p>
<p>
String types: <large><code>CHAR(</code></large><i>n</i><large><code>)</code></large>, <large><code>VARCHAR(</code></large><i>n</i><large><code>)</code></large>,
	<font color="#000099"><large><code>TEXT</code></large></font>
<p><pre>
'John'   'some text'   '!%#%!$'   'O''Brien'
'"'   '[A-Z]{4}\d{4}'   'a VeRy! LoNg String'
</pre><p>
<font color="#000099">PostgreSQL</font> provides extended strings containing <large><code>\</code></large> escapes, e.g.
<p><pre>
E'\n'   E'O\'Brien'   E'[A-Z]{4}\\d{4}'   E'John'
</pre><p>
<p>
Type-casting via <i>Expr</i><large><font color="#008800"><b><code>::</code></b></font></large><i>Type</i>
	&nbsp; (e.g. <large><code>'10'::integer</code></large>)
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [8/12]</div> <DIV class='slideCl1    ' id="s9"  >
<div class='navCl1'><a href="#s8"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s10"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Types/Constants in SQL <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Logical type: <large><code>BOOLEAN</code></large>, <large><code>TRUE</code></large> <small>and</small> <large><code>FALSE</code></large> &nbsp; (<small>or</small> <large><code>true</code></large> <small>and</small> <large><code>false</code></large>)
<p>
<small><font color="#000099">PostgreSQL</font> also allows <large><code>'t'</code></large>, <large><code>'true'</code></large>, <large><code>'yes'</code></large>,
	<large><code>'f'</code></large>, <large><code>'false'</code></large>, <large><code>'no'</code></large></small>
<p>
Time-related types: <large><code>DATE</code></large>, <large><code>TIME</code></large>, <large><code>TIMESTAMP</code></large>, <large><code>INTERVAL</code></large>
<p><pre>
'2008-04-13'  '13:30:15'  '2004-10-19 10:23:54'
<font color="#000099">'Wed Dec 17 07:37:16 1997 PST'</font>
'10 minutes'  '5 days, 6 hours, 15 seconds'
</pre><p>
Subtraction of timestamps yields an interval, e.g.
<p><pre>
now()::TIMESTAMP - birthdate::TIMESTAMP
</pre><p>
<font color="#000099">PostgreSQL</font> also has a range of non-standard types, e.g. <br>
<small>
<ul>
<li> geometric (point/line/...), currency, IP addresses, JSON, XML, objectIDs, ...
<li> non-standard types typically use string literals (<large><code>'...'</code></large>) <tiny>which need to be interpreted</tiny>
</ul>
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [9/12]</div> <DIV class='slideCl1    ' id="s10"  >
<div class='navCl1'><a href="#s9"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s11"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Types/Constants in SQL <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Users can define their own types in several ways:
<p><pre>
<span class='comment'>-- domains: constrained version of existing type</span>

<font color="#000099">CREATE DOMAIN</font> <i>Name</i> AS <i>Type</i> CHECK ( <i>Constraint</i> )

<span class='comment'>-- tuple types: defined for each table</span>

<font color="#000099">CREATE TYPE</font> <i>Name</i> AS ( <i>AttrName</i> <i>AttrType</i>, ... )

<span class='comment'>-- enumerated type: specify elements and ordering</span>

<font color="#000099">CREATE TYPE</font> <i>Name</i> AS ENUM ( '<i>Label</i>', ... )
</pre><p>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [10/12]</div> <DIV class='slideCl1    ' id="s11"  >
<div class='navCl1'><a href="#s10"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s12"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Examples of Defining Domains/Types</div></td><td align='right'></td></tr></table>
<p>
<p><pre>
<span class='comment'>-- positive integers</span>
CREATE DOMAIN PosInt AS integer CHECK (value > 0);

<span class='comment'>-- a UNSW course code</span>
CREATE DOMAIN CourseCode AS char(8)
    CHECK (value ~ '[A-Z]{4}[0-9]{4}');

<span class='comment'>-- a UNSW student/staff ID</span>
CREATE DOMAIN ZID AS integer
    CHECK (value betweem 1000000 and 9999999);

<span class='comment'>-- standard UNSW grades (FL,PS,CR,DN,HD)</span>
CREATE DOMAIN Grade AS char(2)
    CHECK (value in ('FL','PS','CR','DN','HD'));
<span class='comment'>-- or</span>
CREATE TYPE Grade AS ENUM ('FL','PS','CR','DN','HD');
</pre><p>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [11/12]</div> <DIV class='slideCl1    ' id="s12"  >
<div class='navCl1'><a href="#s11"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>   </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Tuple and Set Literals</div></td><td align='right'></td></tr></table>
<p>
Tuple and set constants are both written as:
<p><pre>
( <i>val<sub>1</sub>, val<sub>2</sub>, val<sub>3</sub>,</i> ... )
</pre><p>
The correct interpretation is worked out from the context.
<p>
Examples:
<p><pre><small>
INSERT INTO Student(studeID, name, degree)
   VALUES (2177364, 'Jack Smith', 'BSc')
          <span class='comment'>-- tuple literal</span>

CONSTRAINT CHECK gender IN ('male','female','unspecified')
                           <span class='comment'>-- set literal</span>
</small></pre><p>
</DIV>
<div class='slideNumCl2'>COMP3311 21T1 &#9826; SQL Intro &#9826; [12/12]</div><p><hr><p>
<span style='font-size:11px;color: grey;'>Produced: 10 Feb 2021</span>
 <script src='lib/prism.js'></script>   
 <script src='lib/sg.js'></script>   
</body>
</html>
