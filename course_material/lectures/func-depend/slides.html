<html>
<head>
<title>Functional Dependency</title>
<link href='lib/slides.css' rel='stylesheet' type='text/css'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
<link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet'>
<link href='lib/prism.css' rel='stylesheet'>
<script src='lib/sg.js'></script>
</head>
<body>
 <DIV class='slideCl1' id="s0"  >
<div class='navCl1'><a href="#s1"><span class='nextArrowCl'>>></span></a> </div> <div class='heading'>Functional Dependency</div><p><ul class='indexUl'  style='font-size: 0.7em;'><li class="i"> <a href="#s1">Notation/Terminology</a>
<li class="i"> <a href="#s2">Functional Dependency</a>
<li class="i"> <a href="#s6">Exercise: Functional Dependencies (i)</a>
<li class="i"> <a href="#s8">Functional Dependency (again)</a>
<li class="i"> <a href="#s10">Inference Rules</a>
</ul></DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [0/12]</div> <DIV class='slideCl1    ' id="s1"  >
<div class='navCl1'> <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s2"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Notation/Terminology</div></td><td align='right'></td></tr></table>
<p>
<br>
Most texts adopt the following terminology:
<p>
<p><table border='0' cellpadding='6'>
<tr valign=top>
  <td><nobr>Attributes</td>
  <td></td><td>
  <small>
  upper-case letters from start of alphabet
  (e.g. <i>A</i>, <i>B</i>, <i>C</i>, ...)</small>
  </td>
</tr>
<tr valign=top>
  <td><nobr>Sets of attributes</td>
  <td></td><td>
  <small>
  concatenation of attribute names
  (e.g. <i>X=ABCD</i>, <i>Y=EFG</i> )</small>
  </td>
</tr>
<tr valign=top>
  <td><nobr>Relation schemas</td>
  <td></td><td>
  <small>
  upper-case letters, denoting set of all attributes
  (e.g. <i>R</i>)</small>
  </td>
</tr>
<tr valign=top>
  <td><nobr>Relation instances</td>
  <td></td><td>
  <small>
  lower-case letter corresponding to schema
  (e.g. <i>r(R)</i>)</small>
  </td>
</tr>
<tr valign=top>
  <td><nobr>Tuples</td>
  <td></td><td>
  <small>
  lower-case letters &nbsp;
  (e.g. <i>t</i>, <i>t'</i>, <i>t<sub>1</sub></i>, <i>u</i>, <i>v</i> )</small>
  </td>
</tr>
<tr valign=top>
  <td><nobr>Attributes in tuples</td>
  <td></td><td>
  <small>
  tuple[attrSet] (e.g. <i>t[ABCD]</i>, <i>t[X]</i>)</small>
  </td>
</tr>
</table><p>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [1/12]</div> <DIV class='slideCl1    ' id="s2"  >
<div class='navCl1'><a href="#s1"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s3"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Functional Dependency</div></td><td align='right'></td></tr></table>
<p>
A relation instance <i>r(R)</i> satisfies a dependency <i>X &rarr; Y</i> &nbsp;if
<ul>
<li> for any <i>t, u &isin; r</i>, &nbsp; <i>t[X] = u[X] &nbsp; &rArr; &nbsp; t[Y] = u[Y]</i>
</ul>
In other words, if two tuples in <i>R</i> agree in their values for the
set of attributes <i>X</i>, then they must also agree in their values for
the set of attributes <i>Y</i>.
<p>
We say that "<i>Y</i> &nbsp;is <font color='#0000BB'>functionally dependent</font> on <i>X</i> ".
<p>
Attribute sets <i>X</i> and <i>Y</i> may overlap; &nbsp;
it is trivially true that <i>X &rarr; X</i>.
<p>
<small>
Notes:
<ul>
<li> <i>X &rarr; Y</i> can also be read as "<i>X</i> determines <i>Y</i>"
<li> the single arrow <i>&rarr;</i> denotes <font color='#0000BB'>functional dependency</font>
<li> the double arrow <i>&rArr;</i> denotes logical implication
</ul>
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [2/12]</div> <DIV class='slideCl1    ' id="s3"  >
<div class='navCl1'><a href="#s2"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s4"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Functional Dependency <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Consider the following (redundancy-laden) relation:
<p><pre style="font-size:90%">
Title         | Year | Len | Studio    | Star
--------------+------+-----+-----------+---------------
King Kong     | 1933 | 100 | RKO       | Fay Wray
King Kong     | 1976 | 134 | Paramount | Jessica Lange
King Kong     | 1976 | 134 | Paramount | Jeff Bridges
Mighty Ducks  | 1991 | 104 | Disney    | Emilio Estevez
Wayne's World | 1995 |  95 | Paramount | Dana Carvey
Wayne's World | 1995 |  95 | Paramount | Mike Meyers
</pre><p>
Some functional dependencies in this relation
<ul>
<li> <large><code>Title Year</code></large> &rarr; <large><code>Len</code></large>,
	&nbsp;&nbsp;&nbsp; <large><code>Title Year</code></large> &rarr; <large><code>Studio</code></large>
</ul>
<b>Not</b> a functional dependency
<ul>
<li> <large><code>Title Year</code></large> &rarr; <large><code>Star</code></large>
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [3/12]</div> <DIV class='slideCl1    ' id="s4"  >
<div class='navCl1'><a href="#s3"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s5"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Functional Dependency <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Consider an instance <i>r(R)</i> of the relation schema <i>R(ABCDE)</i>:
<p>
<pre>
 <b><i>A</i></b>  | <b><i>B</i></b>  | <b><i>C</i></b>  | <b><i>D</i></b>  | <b><i>E</i></b>
----+----+----+----+----
 <i>a1</i> | <i>b1</i> | <i>c1</i> | <i>d1</i> | <i>e1</i>
 <i>a2</i> | <i>b1</i> | <i>c2</i> | <i>d2</i> | <i>e1</i>
 <i>a3</i> | <i>b2</i> | <i>c1</i> | <i>d1</i> | <i>e1</i>
 <i>a4</i> | <i>b2</i> | <i>c2</i> | <i>d2</i> | <i>e1</i>
 <i>a5</i> | <i>b3</i> | <i>c3</i> | <i>d1</i> | <i>e1</i>
</pre>
<p>
Since <i>A</i> &nbsp;values are unique, the definition of <i>fd</i> &nbsp;gives:
<ul>
<li> <i>A &rarr; B, &nbsp;&nbsp; A &rarr; C, &nbsp;&nbsp; A &rarr; D, &nbsp;&nbsp; A &rarr; E, &nbsp;&nbsp;&nbsp; or &nbsp;&nbsp; A &rarr; BCDE</i>
</ul>
Since all <i>E</i> &nbsp;values are the same, it follows that:
<ul>
<li> <i>A &rarr; E, &nbsp;&nbsp; B &rarr; E, &nbsp;&nbsp; C &rarr; E, &nbsp;&nbsp; D &rarr; E</i>
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [4/12]</div> <DIV class='slideCl1    ' id="s5"  >
<div class='navCl1'><a href="#s4"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s6"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Functional Dependency <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Other observations:
<ul>
<li> combinations of <i>BC</i> are unique, therefore &nbsp; <i>BC &rarr; ADE</i>
<li> combinations of <i>BD</i> are unique, therefore &nbsp; <i>BD &rarr; ACE</i>
<li> if <i>C</i> values match, so do <i>D</i> values, therefore &nbsp; <i>C &rarr; D</i>
<li> however, <i>D</i> values don't determine <i>C</i> values, so &nbsp; <i>!(D &rarr; C)</i>
</ul>
We could derive many other dependencies, e.g. &nbsp; <i>AE &rarr; BC</i>, ...
<p>
In practice, choose a minimal set of <i>fd</i>s (<font color='#0000BB'>basis</font>)
<ul>
<li> from which all other <i>fd</i>s can be derived
<li> which captures useful problem-domain information
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [5/12]</div> <DIV class='slideCl1    ' id="s6"  >
<div class='navCl1'><a href="#s5"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s7"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Exercise: Functional Dependencies (i)</div></td><td align='right'></td></tr></table>
<p>
Real estate agents conduct visits to rental properties
<ul>
<li> need to record which property, who went, when, results
<li> each property is assigned a unique code (P#, e.g. P4)
<li> each staff member has a staff number (S#, e.g. S43)
<li> staff members use company cars to conduct visits
<li> a visit occurs at a specific time on a given day
<li> notes are made on the state of the property after each visit
</ul>
The company stores all of the associated data in a spreadsheet.
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [6/12]</div> <DIV class='slideCl1    ' id="s7"  >
<div class='navCl1'><a href="#s6"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s8"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Exercise: Functional Dependencies (i) <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
The spreadsheet ...
<p><pre style="font-size:80%">
<b>P</b># | <b>W</b>hen        | <b>A</b>ddress    | <b>N</b>otes         | <b>S</b>#  | Na<b>m</b>e  | <b>C</b>arReg
---+-------------+------------+---------------+-----+-------+-------
P4 | 03/06 15:15 | 55 High St | Bathroom leak | S44 | Rob   | ABK754
P1 | 04/06 11:10 | 47 High St | All ok        | S44 | Rob   | ABK754
P4 | 03/07 12:30 | 55 High St | All ok        | S43 | Dave  | ATS123
P1 | 05/07 15:00 | 47 High St | Broken window | S44 | Rob   | ABK754
P1 | 05/07 15:00 | 47 High St | Leaking tap   | S44 | Rob   | ABK754
P2 | 13/07 12:00 | 12 High St | All ok        | S42 | Peter | ATS123
P1 | 10/08 09:00 | 47 High St | Window fixed  | S42 | Peter | ATS123
P3 | 11/08 14:00 | 99 High St | All ok        | S41 | John  | AAA001
P4 | 13/08 10:00 | 55 High St | All ok        | S44 | Rob   | ABK754
P3 | 05/09 11:15 | 99 High St | Bathroom leak | S42 | Peter | ATS123
</pre><p>
<br>
Functional dependencies: &nbsp; <i>P &rarr; A, &nbsp;&nbsp; A &rarr; P, &nbsp;&nbsp;&nbsp; S &rarr; m, &nbsp;&nbsp; S &rarr; C</i>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [7/12]</div> <DIV class='slideCl1    ' id="s8"  >
<div class='navCl1'><a href="#s7"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s9"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Functional Dependency (again)</div></td><td align='right'></td></tr></table>
<p>
Above examples consider dependency within a relation instance <i>r(R)</i>.
<p>
More important for <i>design</i>&nbsp; is dependency across all possible
instances of the relation (i.e. a schema-based dependency).
<p>
This is a simple generalisation of the previous definition:
<ul>
<li> for any <i>t, u &isin; </i><font color="#CC0000">any</font><i> r(R)</i>, &nbsp; <i>t[X] = u[X] &nbsp; &rArr; &nbsp; t[Y] = u[Y]</i>
</ul>
Such dependencies tend to capture semantics of problem domain.
<p>
E.g. real estate example
<ul>
<li> <i>P &rarr; A</i> suggests a property entity, &nbsp; <i>S &rarr; N, &nbsp;&nbsp;  S &rarr; C</i> suggest a staff entity
<li> Property(P#,addr), &nbsp; Staff(S#,name,car), &nbsp; Inspection(P#,S#,when,notes)
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [8/12]</div> <DIV class='slideCl1    ' id="s9"  >
<div class='navCl1'><a href="#s8"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s10"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Functional Dependency (again) <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
<br>
Can we generalise some ideas about functional dependency? <br>
<p>
<br>
E.g. are there dependencies that hold for <i>any</i> relation?
<ul>
<li> yes, but they're generally trivial, e.g. <i>Y &sub; X &nbsp; &rArr; &nbsp; X &rarr; Y</i>
</ul>
<br>
E.g. do some dependencies suggest the existence of others?
<ul>
<li> yes, <font color='#0000BB'>rules of inference</font> allow us to <font color='#0000BB'>derive</font> dependencies
<li> allow us to reason about sets of functional dependencies
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [9/12]</div> <DIV class='slideCl1    ' id="s10"  >
<div class='navCl1'><a href="#s9"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s11"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Inference Rules</div></td><td align='right'></td></tr></table>
<p>
<font color='#0000BB'>Armstrong's rules</font> are general rules of inference on <i>fd</i>s.
<p> <br>
F1. <font color='#0000BB'>Reflexivity</font> &nbsp; e.g. &nbsp; <i>X &rarr; X</i>
<small>
<ul>
<li> a formal statement of <i>trivial dependencies</i>; useful for derivations
</ul>
</small>
<br>
F2. <font color='#0000BB'>Augmentation</font> &nbsp; e.g. &nbsp; <i>X &rarr; Y &nbsp;&rArr;&nbsp; XZ &rarr; YZ</i>
<small>
<ul>
<li> if a dependency holds, then we can expand its left hand side (along with RHS)
</ul>
</small>
<br>
F3. <font color='#0000BB'>Transitivity</font> &nbsp; e.g. &nbsp; <i>X &rarr; Y, Y &rarr; Z &nbsp;&rArr;&nbsp; X &rarr; Z</i>
<small>
<ul>
<li> the "most powerful" inference rule; useful in multi-step derivations
</ul>
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [10/12]</div> <DIV class='slideCl1    ' id="s11"  >
<div class='navCl1'><a href="#s10"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s12"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Inference Rules <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Armstrong's rules are complete, but other useful rules exist:
<p>
<br>
F4. <font color='#0000BB'>Additivity</font> &nbsp; e.g. &nbsp; <i>X &rarr; Y, X &rarr; Z &nbsp; &rArr; &nbsp; X &rarr; YZ</i>
<small>
<ul>
<li> useful for constructing new right hand sides of <i>fd</i>s (also called <font color='#0000BB'>union</font>)
</ul>
</small>
<br>
F5. <font color='#0000BB'>Projectivity</font> &nbsp; e.g. &nbsp; <i>X &rarr; YZ &nbsp; &rArr; &nbsp; X &rarr; Y, X &rarr; Z</i>
<small>
<ul>
<li> useful for reducing right hand sides of <i>fd</i>s (also called <font color='#0000BB'>decomposition</font>)
</ul>
</small>
<br>
F6. <font color='#0000BB'>Pseudotransitivity</font> &nbsp; e.g. &nbsp; <i>X &rarr; Y, YZ &rarr; W &nbsp; &rArr; &nbsp; XZ &rarr; W</i>
<small>
<ul>
<li> shorthand for a common transitivity derivation
</ul>
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [11/12]</div> <DIV class='slideCl1    ' id="s12"  >
<div class='navCl1'><a href="#s11"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>   </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Inference Rules <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Example: determining validity of <i>AB &rarr; GH</i>, given:
<p>
<div class='center'>
<i>R = ABCDEFGHIJ</i> <p>
<i>F = { AB &rarr; E, &nbsp; AG &rarr; J, &nbsp; BE &rarr; I, &nbsp; E &rarr; G, &nbsp; GI &rarr; H }</i>
</div>
Derivation:
<div class='center'>
<table border='0' cellpadding='4'>
<tr valign=top><td><nobr> 1. &nbsp; </td><td></td><td> <i>AB &rarr; E</i> </td><td></td><td> (given) </td></tr>
<tr valign=top><td><nobr> 2. &nbsp; </td><td></td><td> <i>E &rarr; G</i> </td><td></td><td> (given) </td></tr>
<tr valign=top><td><nobr> 3. &nbsp; </td><td></td><td> <font color="#0000EE"><i>AB &rarr; G</i></font> </td><td></td><td> (using F3 on 1,2) </td></tr>
<tr valign=top><td><nobr> 4. &nbsp; </td><td></td><td> <i>AB &rarr; AB</i> </td><td></td><td> (using F1) </td></tr>
<tr valign=top><td><nobr> 5. &nbsp; </td><td></td><td> <i>AB &rarr; B</i> </td><td></td><td> (using F5 on 4) </td></tr>
<tr valign=top><td><nobr> 6. &nbsp; </td><td></td><td> <i>AB &rarr; BE</i> </td><td></td><td> (using F4 on 1,5) </td></tr>
<tr valign=top><td><nobr> 7. &nbsp; </td><td></td><td> <i>BE &rarr; I</i> </td><td></td><td> (given) </td></tr>
<tr valign=top><td><nobr> 8. &nbsp; </td><td></td><td> <i>AB &rarr; I</i> </td><td></td><td> (using F3 on 6,7) </td></tr>
<tr valign=top><td><nobr> 9. &nbsp; </td><td></td><td> <i>AB &rarr; GI</i> </td><td></td><td> (using F4 on 3,8) </td></tr>
<tr valign=top><td><nobr> 10. </td><td></td><td> <i>GI &rarr; H</i> </td><td></td><td> (given) </td></tr>
<tr valign=top><td><nobr> 11. </td><td></td><td> <font color="#0000EE"><i>AB &rarr; H</i></font> </td><td></td><td> (using F3 on 9,10) </td></tr>
<tr valign=top><td><nobr> 12. </td><td></td><td> <i>AB &rarr; GH</i> </td><td></td><td> (using F4 on 3,11) </td></tr>
</table>
</div>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Functional Dependency &#9826; [12/12]</div><p><hr><p>
<span style='font-size:11px;color: grey;'>Produced: 5 Nov 2020</span>
 <script src='lib/prism.js'></script>   
 <script src='lib/sg.js'></script>   
</body>
</html>
