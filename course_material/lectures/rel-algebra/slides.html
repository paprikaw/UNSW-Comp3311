<html>
<head>
<title>Relational Algebra</title>
<link href='lib/slides.css' rel='stylesheet' type='text/css'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
<link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet'>
<link href='lib/prism.css' rel='stylesheet'>
<script src='lib/sg.js'></script>
</head>
<body>
 <DIV class='slideCl1' id="s0"  >
<div class='navCl1'><a href="#s1"><span class='nextArrowCl'>>></span></a> </div> <div class='heading'>Relational Algebra</div><p><ul class='indexUl'  style='font-size: 0.7em;'><li class="i"> <a href="#s1">Relational Algebra</a>
<li class="i"> <a href="#s4">Notation</a>
<li class="i"> <a href="#s5">Describing RA Operations</a>
<li class="i"> <a href="#s7">Example Database #1</a>
<li class="i"> <a href="#s8">Example Database #2</a>
<li class="i"> <a href="#s9">Rename</a>
<li class="i"> <a href="#s11">Selection</a>
<li class="i"> <a href="#s14">Projection</a>
</ul></DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [0/16]</div> <DIV class='slideCl1    ' id="s1"  >
<div class='navCl1'> <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s2"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Relational Algebra</div></td><td align='right'></td></tr></table>
<p>
<font color='#0000BB'>Relational algebra</font> (RA) can be viewed as ...
<ul>
<li> mathematical system for manipulating relations, or
<li> data manipulation language (DML) for the relational model
</ul>
Relational algebra consists of:
<ul>
<li> <font color='#0000BB'>operands</font>: relations, or variables representing relations
<li> <font color='#0000BB'>operators</font> that map relations to relations
<li> rules for combining operands/operators into expressions
<li> rules for evaluating such expressions
</ul>
Why is it important?
<ul>
<li> because it forms the basis for DBMS implementation
<li> relational algebra ops are like the machine code for DBMSs
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [1/16]</div> <DIV class='slideCl1    ' id="s2"  >
<div class='navCl1'><a href="#s1"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s3"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Relational Algebra <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
<br>
Core relational algebra operations:
<ul>
<li> <font color='#0000BB'>rename</font>: change names of relations/attributes
<li> <font color='#0000BB'>selection</font>: choosing a subset of tuples/rows
<li> <font color='#0000BB'>projection</font>: choosing a subset of attributes/columns
<li> <font color='#0000BB'>union</font>, <font color='#0000BB'>intersection</font>, <font color='#0000BB'>difference</font>: combining relations
<li> <font color='#0000BB'>product</font>, <font color='#0000BB'>join</font>: combining relations
</ul>
Common extensions include:
<ul>
<li> <font color='#0000BB'>aggregation</font>, &nbsp;<font color='#0000BB'>projection++</font>, &nbsp;<font color='#0000BB'>division</font>
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [2/16]</div> <DIV class='slideCl1    ' id="s3"  >
<div class='navCl1'><a href="#s2"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s4"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Relational Algebra <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Select, project, join provide a powerful set of operations for
building relations and extracting interesting data from them.
<p>
<p><div align='center'>
<img alt="[Diagram:Pics/relalg/spj.png]" src="Pics/relalg/spj.png">
</div><p>
<p>
Adding set operations and renaming makes RA <font color='#0000BB'>complete</font>.
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [3/16]</div> <DIV class='slideCl1    ' id="s4"  >
<div class='navCl1'><a href="#s3"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s5"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Notation</div></td><td align='right'></td></tr></table>
<p>
Standard treatments of relational algebra use Greek symbols.
<p>
We use the following notation <small>(because it is easier to reproduce)</small>:
<p><table border='0' cellpadding='6'>
<tr valign=top>
  <td><nobr><b>Operation</b></td>
  <td></td><td><b>Standard<br>Notation</b></td>
  <td></td><td><b>Our<br>Notation</b></td>
</tr>
<tr valign=top>
  <td><nobr>Selection</td>
  <td></td><td><i><span style="font-size:150%">&sigma;</span><sub>expr</sub>(Rel)</i></td>
  <td></td><td><i>Sel[expr](Rel)</i></td>
</tr>
<tr valign=top>
  <td><nobr>Projection</td>
  <td></td><td><i><span style="font-size:150%">&pi;</span><sub>A,B,C</sub>(Rel)</i></td>
  <td></td><td><i>Proj[A,B,C](Rel)</i></td>
</tr>
<tr valign=top>
  <td><nobr>Join</td>
  <td></td><td><i>Rel<sub>1</sub> <span style="font-size:150%">&#10781;</span><sub>expr</sub> Rel<sub>2</sub></i></td>
  <td></td><td><i>Rel<sub>1</sub> &nbsp;Join[expr]&nbsp; Rel<sub>2</sub></i></td> 
</tr>
<tr valign=top>
  <td><nobr>Rename</td>
  <td></td><td><i>&rho;<sub>schema</sub>Rel</i></td>
  <td></td><td><i>Rename[schema](Rel)</i></td> 
</tr>
</table><p>
<small>
For other operations (e.g. set operations) we adopt the standard notation. <br>
Except when typing in a text file, where <large><code>*</code></large> = intersection, <large><code>+</code></large> = union
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [4/16]</div> <DIV class='slideCl1    ' id="s5"  >
<div class='navCl1'><a href="#s4"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s6"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Describing RA Operations</div></td><td align='right'></td></tr></table>
<p>
We define the semantics of RA operations using
<ul>
<li> "conditional set" expressions &nbsp; e.g. <i>{ X | condition on X }</i>
<li> tuple notations:
<ul>
<li> <i>t[AB]</i> &nbsp; <small>(extracts attributes <i>A</i> and <i>B</i> from tuple <i>t</i>)</small>
<li> <i>(x,y,z)</i> &nbsp; <small>(enumerated tuples; specify attribute values)</small>
</ul>
<li> quantifiers, set operations, boolean operators
</ul>
For each operation, we also describe it operationally:
<ul>
<li> give an algorithm to compute the result, tuple-by-tuple
<li> <small>the algorithm is not generally how it will be computed in practice</small>
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [5/16]</div> <DIV class='slideCl1    ' id="s6"  >
<div class='navCl1'><a href="#s5"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s7"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Describing RA Operations <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
All RA operators return a result of type <font color='#0000BB'>relation</font>.
<p>
For convenience, we can name a result and use it later.
<p>
E.g.
<p><pre>
Temp = R <i>op<sub>1</sub></i> S <i>op<sub>2</sub></i> T
Res  = Temp <i>op<sub>3</sub></i> Z
<span class='comment'>-- which is equivalent to</span>
Res  = (R <i>op<sub>1</sub></i> S <i>op<sub>2</sub></i> T) <i>op<sub>3</sub></i> Z
</pre><p>
<small>
Each "intermediate result" has a well-defined schema.
</small>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [6/16]</div> <DIV class='slideCl1    ' id="s7"  >
<div class='navCl1'><a href="#s6"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s8"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Example Database #1</div></td><td align='right'></td></tr></table>
<p>
<p><br>
<p><div align='center'>
<img alt="[Diagram:Pics/relalg/db1.png]" src="Pics/relalg/db1.png">
</div><p>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [7/16]</div> <DIV class='slideCl1    ' id="s8"  >
<div class='navCl1'><a href="#s7"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s9"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Example Database #2</div></td><td align='right'></td></tr></table>
<p>
<p><br>
<p><div align='center'>
<img alt="[Diagram:Pics/relalg/db2.png]" src="Pics/relalg/db2.png">
</div><p>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [8/16]</div> <DIV class='slideCl1    ' id="s9"  >
<div class='navCl1'><a href="#s8"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s10"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Rename</div></td><td align='right'></td></tr></table>
<p>
<font color='#0000BB'>Rename</font> provides "schema mapping".
<p>
If expression <i>E</i> returns a relation
<i>R(A<sub>1</sub>, A<sub>2</sub>, ... A<sub>n</sub>)</i>, then
<p>
<div class='center'>
<i>Rename[S(B<sub>1</sub>, B<sub>2</sub>, ... B<sub>n</sub>)](E)</i>
</div>
<p>
gives a relation called <i>S</i>
<ul>
<li> containing the same set of tuples as <i>E</i>
<li> but with the name of each attribute changed from <i>A<sub>i</sub></i>
to <i>B<sub>i</sub></i>
</ul>
Rename is like the identity function on the <i>contents</i> of a relation
<p>
The only thing that Rename changes is the schema.
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [9/16]</div> <DIV class='slideCl1    ' id="s10"  >
<div class='navCl1'><a href="#s9"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s11"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Rename <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
<font color='#0000BB'>Rename</font> can be viewed as a "technical" apparatus of RA.
<p>
We can also use implicit rename/project in sequences of RA operations, e.g.
<p><pre style="font-size:90%">
<span class='comment'>--  R(a,b,c),  S(c,d)</span>
Res = Rename[Res(b,c,d)](Project[b,c](Sel[a>5](R)) Join S)
<span class='comment'>-- vs</span>
Tmp1 = Select[a>5](R)
Tmp2 = Project[b,c](Tmp1)
Tmp3 = Rename[Tmp3(cc,d)](S)
Tmp4 = Tmp2 Join[c=cc] Tmp3
Res  = Rename[Res(b,c,d)](Tmp4)
<span class='comment'>-- vs</span>
Tmp1(b,c)  = Select[a>5](R)
Tmp2(cc,d) = S
Res(b,c,d) = Tmp1 Join[c=cc] Tmp2
</pre><p>
In SQL, we achieve a similar effect by defining a set of views
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [10/16]</div> <DIV class='slideCl1    ' id="s11"  >
<div class='navCl1'><a href="#s10"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s12"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Selection</div></td><td align='right'></td></tr></table>
<p>
<font color='#0000BB'>Selection</font> returns a subset of the tuples
in a relation <i>r(R)</i> that satisfy a specified condition <i>C</i>.
<p>
<div class='center'>
<i><span style="font-size:150%">&sigma;</span><sub>C</sub>(r)</i> &nbsp; = &nbsp; <i>Sel[C](r)</i> &nbsp; = &nbsp; { <i>t</i> &nbsp;|&nbsp; <i>t &isin; r &and; C(t)</i> }
</div>
<p>
<i>C</i> is a boolean expression on attributes in <i>R</i>.
<p>
Result size: &nbsp; |<i><span style="font-size:150%">&sigma;</span><sub>C</sub>(r)</i>| <i>&le;</i> |<i>r</i>|
<p>
Result schema: &nbsp; same as the schema of <i>r</i> &nbsp; (i.e. <i>R</i>)
<p>
Algorithmic view:
<p><pre>
<i>result</i> = {}
for each tuple <i>t</i> in relation <i>r</i>
    if (<i>C(t)</i>) { <i>result</i> = <i>result &cup; {t}</i> }
</pre><p>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [11/16]</div> <DIV class='slideCl1    ' id="s12"  >
<div class='navCl1'><a href="#s11"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s13"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Selection <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Examples of selection:
<p>
<p><div align='center'>
<img alt="[Diagram:Pics/relalg/selection2.png]" src="Pics/relalg/selection2.png">
</div><p>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [12/16]</div> <DIV class='slideCl1    ' id="s13"  >
<div class='navCl1'><a href="#s12"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s14"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Selection <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Querying with relational algebra (selection) ...
<ul>
<br>
<li> Details of all bars in The Rocks
<p><pre>
Result = Sel[addr=The Rocks](Bars)
</pre><p>
<br>
<li> Beers made by Sierra Nevada
<p><pre>
SNBeers = Sel[manf=Sierra Nevada](Beers)
Result  = Rename[beer](Proj[name](SNBeers))
</pre><p>
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [13/16]</div> <DIV class='slideCl1    ' id="s14"  >
<div class='navCl1'><a href="#s13"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s15"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Projection</div></td><td align='right'></td></tr></table>
<p>
<font color='#0000BB'>Projection</font> returns a set of tuples containing
a subset of the attributes in the original relation.
<p>
<div class='center'>
<i><span style="font-size:150%">&pi;</span><sub>X</sub>(r)</i> &nbsp; = &nbsp; <i>Proj[X](r)</i> &nbsp; = &nbsp; { <i>t[X]</i> &nbsp;|&nbsp; <i>t &isin; r</i> }, &nbsp;&nbsp;&nbsp; where <i>r(R)</i>
</div>
<p>
<i>X</i> specifies a subset of the attributes of <i>R</i>.
<p>
Note that removing key attributes can produce duplicates.
<p>
In RA, duplicates are removed from the result <font color='#0000BB'>set</font>.
<br>
<small><font color="#777777">(In RDBMS's, duplicates are retained &nbsp; (i.e. they use bags, not sets)</small>)</font></small>
<p>
Result size: &nbsp; |<i><span style="font-size:150%">&pi;</span><sub>X</sub>(r)</i>| <i>&le;</i> |<i>r</i>|
&nbsp;&nbsp;&nbsp;
Result schema: &nbsp; <i>R'(X)</i>
<p>
Algorithmic view:
<p><pre>
<i>result</i> = {}
for each tuple <i>t</i> in relation <i>r</i>
    <i>result</i> = <i>result &cup; {t[X]}</i>
</pre><p>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [14/16]</div> <DIV class='slideCl1    ' id="s15"  >
<div class='navCl1'><a href="#s14"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>  <a href="#s16"><span class='nextArrowCl'> >> </span></a> </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Projection <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Examples of projection:
<p>
<p><div align='center'>
<img alt="[Diagram:Pics/relalg/projection2.png]" src="Pics/relalg/projection2.png">
</div><p>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [15/16]</div> <DIV class='slideCl1    ' id="s16"  >
<div class='navCl1'><a href="#s15"><span class='prevArrowCl'> << </span></a>  <a href="#s0"><span class='upArrowCl'>&and;</span></a>   </div> <table width='100%' cellpadding='0'>
<tr valign='top'><td align='left'><div class='heading'>&#10070; Projection <span style="font-size:67%">(cont)</span></div></td><td align='right'></td></tr></table>
<p>
Querying with relational algebra (projection)...
<ul>
<br>
<li> Names of all beers
<p><pre>
Result = Proj[name](Beers)
</pre><p>
<li> Names of drinkers who live in Newtown
<p><pre>
Result = Proj[name](Sel[addr=Newtown](Drinkers))
</pre><p>
<li> What are all of the breweries?
<p><pre>
Result(brewer) = Proj[manf](Beers)
</pre><p>
</ul>
</DIV>
<div class='slideNumCl2'>COMP3311 20T3 &#9826; Relational Algebra &#9826; [16/16]</div><p><hr><p>
<span style='font-size:11px;color: grey;'>Produced: 6 Nov 2020</span>
 <script src='lib/prism.js'></script>   
 <script src='lib/sg.js'></script>   
</body>
</html>
