<html>
<head>
<title>Data modelling and OO/ER data models</title>
<link href='lib/notes.css' rel='stylesheet' type='text/css'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" async></script>
<script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
<link href='lib/prism.css' rel='stylesheet'>
<script src='lib/sg.js'></script>
</head>
<body>
<div class='heading'>Data modelling and OO/ER data models</div><p><ul class='indexUl'  style='font-size: 0.7em;'><li class="i"> <a href="#s1">Data Modelling</a>
<li class="i"> <a href="#s2">Data Modelling</a>
<li class="i"> <a href="#s5">Data Models</a>
<li class="i"> <a href="#s6">Object-based vs. Record-based</a>
<li class="i"> <a href="#s8"> Database Design</a>
<li class="i"> <a href="#s9">Some Design Ideas</a>
<li class="i"> <a href="#s10">Case Study: Banking System</a>
<li class="i"> <a href="#s11">Correctness of Designs</a>
<li class="i"> <a href="#s13"> Object-Oriented Data Modelling</a>
<li class="i"> <a href="#s14"> Object-oriented Data Modelling</a>
<li class="i"> <a href="#s16"> Object Definition Language (ODL)</a>
<li class="i"> <a href="#s17">ODL Definitions</a>
<li class="i"> <a href="#s18">Classes</a>
<li class="i"> <a href="#s19">Attributes</a>
<li class="i"> <a href="#s20">ODL Types</a>
<li class="i"> <a href="#s25">Relationships</a>
<li class="i"> <a href="#s29">Relationship Multiplicity</a>
<li class="i"> <a href="#s31">ODL Model for Bank</a>
<li class="i"> <a href="#s37"> Entity-Relationship (ER) Model</a>
<li class="i"> <a href="#s38"> Entity-Relationship Data Modelling</a>
<li class="i"> <a href="#s42"> Entity-Relationship (ER) Diagrams</a>
<li class="i"> <a href="#s45">Attributes</a>
<li class="i"> <a href="#s49">Entity Sets</a>
<li class="i"> <a href="#s50">Keys</a>
<li class="i"> <a href="#s57">Relationship Sets</a>
<li class="i"> <a href="#s67">Weak Entity Sets</a>
<li class="i"> <a href="#s71">Subclasses and Inheritance</a>
<li class="i"> <a href="#s74">Design Using the ER Model</a>
<li class="i"> <a href="#s78">ER Model for Bank</a>
<li class="i"> <a href="#s84">Limitations of ER Model</a>
<li class="i"> <a href="#s85">Summary</a>
</ul><hr>
<DIV id="s1">
<div class='section'>&#8750; Data Modelling</div>
<p>
</DIV>
<hr>
<DIV id="s2">
<div class='heading'>Data Modelling</div>
<p>
<font color='#0000BB'>Data modelling</font>: an important early stage of database application development <small>(aka "database engineering")</small>.
<p>
<ol>
<li> requirements analysis
	&nbsp; <small>(identify data and operations)</small>
<li> <font color="#0000EE"><b>data modelling</b></font>
	&nbsp; <small>(high-level, abstract)</small>
<li> database schema design
	&nbsp; <small>(detailed, relational/tables)</small>
<li> database physical design
	&nbsp; <small>(based on expected workload)</small>
<li> database implementation
	&nbsp; <small>(create instance of schema)</small>
<li> build operations/interface
	&nbsp; <small>(SQL, stored procedures, GUI)</small>
<li> performance tuning
	&nbsp; <small>(physical re-design)</small>
<li> schema evolution
	&nbsp; <small>(logical schema re-design)</small>
</ol>
</DIV>
<hr>
<DIV id="s3">
<div class='heading'>Data Modelling <span style="font-size:67%">(cont)</span></div>
<p>
Aim of data modelling:
<ul>
<li> describe what <font color='#0000BB'>information</font> is contained in the database <br>
	<small>(e.g. entities: students, courses, accounts, branches, patients, ...)</small>
<li> describe <font color='#0000BB'>relationships</font> between data items <br>
	<small>(e.g. John is enrolled in COMP3311, Paul's account is held at Coogee)</small>
<li> describe <font color='#0000BB'>constraints</font> on data <br>
	<small>(e.g. 7-digit IDs, students can enrol in no more than 36UC per semester)</small>
</ul>
<p>
Data modelling is analogous to the design phase of
software engineering, but deals only with data structures.
</DIV>
<hr>
<DIV id="s4">
<div class='heading'>Data Modelling <span style="font-size:67%">(cont)</span></div>
<p>
Inputs to data modelling:
<ul>
<li> enterprise to be modelled, user requirements
</ul>
Outputs from data modelling:
<ul>
<li> (semi) formal description of the database structure
</ul>
Many languages/methodologies have been developed to assist, e.g.
<ul>
<li> entity-relationship (ER) diagrams
<li> ODL = object design language
<li> UML = unified modelling language
</ul>
</DIV>
<hr>
<DIV id="s5">
<div class='heading'>Data Models</div>
<p>
<font color='#0000BB'>Data models</font> are either:
<ul>
<li> <font color='#0000BB'>logical models</font>
	&nbsp; <small>... deal with conceptual modelling of information</small>
<li> <font color='#0000BB'>physical models</font>
	&nbsp; <small>... deal with physical layout of data in storage</small>
</ul>
Two main groups of logical data models:
<ul>
<li> <font color='#0000BB'>object-based models</font>
<ul>
<li> e.g. entity-relationship, object-oriented, semantic, ...
</ul>
<li> <font color='#0000BB'>record based models</font>
<ul>
<li> e.g. relational, network, hierachical, ...
</ul>
</ul>
</DIV>
<hr>
<DIV id="s6">
<div class='heading'>Object-based vs. Record-based</div>
<p>
Object-based data models
<ul>
<li> treat database as a collection of entities of various kinds
<li> provide very flexible/natural data structuring facilities
<li> may also allow description of code for actions on objects
</ul>
Record-based data models
<ul>
<li> treat database as a collection of fixed-size records
<li> less flexible data structures than with object-based models
<li> closer to physical level so easier to implement efficiently
</ul>
</DIV>
<hr>
<DIV id="s7">
<div class='heading'>Object-based vs. Record-based <span style="font-size:67%">(cont)</span></div>
<p>
Formal mappings exist between the different kinds of models.
<p>
A useful strategy:
<ul>
<li> design in an object-based model
	&nbsp; <small>(for clarity)</small>
<li> then convert to a record-based model
	&nbsp; <small>(for efficiency)</small>
</ul>
We adopt this (very common) strategy in this course.
</DIV>
<hr>
<DIV id="s8">
<div class='heading'> Database Design</div>
<p>
The initial elements of the database design process:
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/process.png]" src="Pic/er-rel/process.png">
</div><p>
</DIV>
<hr>
<DIV id="s9">
<div class='heading'>Some Design Ideas</div>
<p>
Consider the following while doing data modelling:
<ul>
<li> ought to establish all requirements before designing
<li> designs evolve as we consider more aspects of the problem
<li> most designs involve various kinds (classes) of people
<li> keywords in requirements give clues for data/relationships <br>
        <small>(simplistic rule-of-thumb: nouns suggest data, verbs suggest rela
tionships)</small>
<li> don't confuse operations with relationships <br>
        <small>(operation: he <b>buys</b> a book; relationship: the book <b>is o
wned</b> by him)</small>
<li> consider all potential scenarios, not just actual data <small>(if given)</small>
</ul>
</DIV>
<hr>
<DIV id="s10">
<div class='heading'>Case Study: Banking System</div>
<p>
Consider the database system for a savings/loan bank ...
<p>
What kind of information does it need to maintain?
<ul>
<li> e.g. customers, accounts, branches, staff, transactions, ...
</ul>
How are all of these data items related?
<ul>
<li> e.g. customers hold accounts at specific branches, ...
</ul>
We illustrate data models by:
<ul>
<li> describing, in abstract terms, the capabilities they offer
<li> showing how they could be used to model this application
</ul>
</DIV>
<hr>
<DIV id="s11">
<div class='heading'>Correctness of Designs</div>
<p>
In general, there is no single "best" design for a given application.
<p>
Also, limitations of modelling framework may force compromises.
<p>
However, we may describe a proposed design as "inadequate" if it:
<ul>
<li> omits some information that is supposed to be modelled
	<br> <small>(e.g. no customer name or account balance)</small>
<li> contains redundant information
	&nbsp;<small>(but may be unavoidable)</small>
	<br> <small>(e.g. customer name stored in both <large><code>Customer</code></large> and <large><code>Account</code></large>)</small>
<li> leads to an inefficient implementation
	<br> <small>(e.g. required to traverse large amount of data for most common operation)</small>
<li> violates syntactic or semantic rules of data model
	<br> <small>(e.g. in ER, line connecting two entities)</small>
</ul>
</DIV>
<hr>
<DIV id="s12">
<div class='heading'>Correctness of Designs <span style="font-size:67%">(cont)</span></div>
<p>
Initial requirements statements are typically vague
<ul>
<li> elicit more detailed requirements before design
<li> ask for clarification during design
</ul>
Most important aspects of design documents:
<ul>
<li> completeness
	&nbsp; <small>(all assumptions are explicit)</small>
<li> consistency
	&nbsp; <small>(no contradictory statements)</small>
</ul>
</DIV>
<hr>
<DIV id="s13">
<div class='section'>&#8750;  Object-Oriented Data Modelling</div>
<p>
</DIV>
<hr>
<DIV id="s14">
<div class='heading'> Object-oriented Data Modelling</div>
<p>
The world is viewed as a collection of inter-related <font color='#0000BB'>objects</font>.
<p>
Examples:
	&nbsp; a person,
	&nbsp; a car,
	&nbsp; a bank account, ...
<p>
Each object is described by:
<ul>
<li> a unique object identifier (OID) <small>(to distinguish it from other obejcts)</small>
<li> a collection of attributes that model "properties of interest"
<li> operations (<font color='#0000BB'>methods</font>) that can be performed on the object
</ul>
</DIV>
<hr>
<DIV id="s15">
<div class='heading'> Object-oriented Data Modelling <span style="font-size:67%">(cont)</span></div>
<p>
A <font color='#0000BB'>class</font> is a set of objects with similar properties and methods.
<p>
Examples:
	&nbsp; all students <small>(at UNSW)</small>,
	&nbsp; all cars <small>(in Australia)</small>, ...
<p>
All student objects have the same data and operations,
<p>
e.g. <large><code>student.name</code></large>, &nbsp; <large><code>student.graduates(2003)</code></large>
<p>
An alternative view of classes
<ul>
<li> a template for generating objects of a certain kind
</ul>
</DIV>
<hr>
<DIV id="s16">
<div class='heading'> Object Definition Language (ODL)</div>
<p>
<font color='#0000BB'>ODL</font> is a proposed standard for object-oriented data modelling:
<ul>
<li> developed by Object Data Management Group (ODMG)
<li> an extension of the Interface Definition Language (IDL)
<li> IDL defined in CORBA <small>(model for distributed object systems)</small>
</ul>
For object-oriented database management systems:
<ul>
<li> ODL is the proposed standard data definition language
<li> OQL (Object Query Language) is the proposed standard query language
</ul>
</DIV>
<hr>
<DIV id="s17">
<div class='heading'>ODL Definitions</div>
<p>
An ODL definition consists of a collection of classes.
<p>
ODL describes classes using three kinds of properties:
<ul>
<li> <font color='#0000BB'>attributes</font> - data values associated with objects
<li> <font color='#0000BB'>relationships</font> - connections between objects
<li> <font color='#0000BB'>methods</font> - actions on objects
</ul>
Since we are concerned with <i>data</i> modelling here, we ignore methods.
</DIV>
<hr>
<DIV id="s18">
<div class='heading'>Classes</div>
<p>
Class declarations have the following syntax:
<p><pre>
interface <i>ClassName</i> : <i>ParentClass</i> { <i>List of Properties</i> }
</pre><p>
Example:
<p><pre>
interface Person {
	attribute string  name;
	attribute integer height;
	attribute Enum Gender gender;
	attribute Struct Date birthday;
};

interface Employee : Person {
	attribute float   salary;
	relationship Company WorksFor
	     inverse Company::Employs;
};
</pre><p>
</DIV>
<hr>
<DIV id="s19">
<div class='heading'>Attributes</div>
<p>
<font color='#0000BB'>Attributes</font> describe the data values associated with an object. 
<p>
Each attribute is defined by a <font color='#0000BB'>type</font> and a <font color='#0000BB'>name</font>.
<p>
ODL defines a variety of atomic, user-defined, and structured data types.
<p>
Attributes can have any type <b>except</b> types involving class types.
<p>
Names have global scope, and are used in context of object (e.g. <large><code>p.name</code></large>).
<p>
Attributes are inherited by sub-classes.
</DIV>
<hr>
<DIV id="s20">
<div class='heading'>ODL Types</div>
<p>
Atomic built-in data types:
<ul>
<li> integer, float, character, string, boolean
</ul>
Atomic user-defined data types:
<ul>
<li> enumerated types &nbsp; (cf. C's <large><code>enum</code></large>)
</ul>
Examples:
<p><pre>
Enum Gender   {male, female}
Enum AcctType {savings, cheque, credit}
Enum Colour   {red, orange, yellow, green, blue}
</pre><p>
</DIV>
<hr>
<DIV id="s21">
<div class='heading'>ODL Types <span style="font-size:67%">(cont)</span></div>
<p>
Structured data types are built using a set of type constructors:
<p>
<p><table border='0' cellpadding='6'>
<tr valign=top>
  <td><nobr> <large><code>Set&lt;</code></large><i>T</i><large><code>&gt;</code></large> </td>
  <td></td><td> unordered collections of distinct elements of type <i>T</i> </td>
</tr>
<tr valign=top>
  <td><nobr> <large><code>Bag&lt;</code></large><i>T</i><large><code>&gt;</code></large> </td>
  <td></td><td> unordered collections of elements of type <i>T</i> </td>
</tr>
<tr valign=top>
  <td><nobr> <large><code>List&lt;</code></large><i>T</i><large><code>&gt;</code></large> </td>
  <td></td><td> sequences of elements of type <i>T</i> </td>
</tr>
<tr valign=top>
  <td><nobr> <large><code>Array&lt;</code></large><i>T,i</i><large><code>&gt;</code></large> </td>
  <td></td><td> fixed-length vectors of <i>i</i> elements of type <i>T</i> </td>
</tr>
</table><p>
<p>
The base types <i>T</i>'s can be arbitrary types, including class types.
<p>
A structured type for an attribute may not contain any class types.
<p>
These structured types are ODL's <font color='#0000BB'>collection types</font>
	&nbsp; <small>(important for relationships)</small>.
</DIV>
<hr>
<DIV id="s22">
<div class='heading'>ODL Types <span style="font-size:67%">(cont)</span></div>
<p>
Differences between Sets, Bags, Lists:
<p>
<table border='0' cellpadding='4'>
<tr valign=top>
  <td><nobr>&nbsp;</td>
  <td></td><td> <small>{1,2,3}={1,2,3}</small> </td>
  <td></td><td> <small>{1,2,3}={3,2,1}</small> </td>
  <td></td><td> <small>{1,1,2}={1,2,1}</small> </td>
  <td></td><td> <small>{1,1,2}={1,2}</small> </td>
</tr>
<tr valign=top>
  <td><nobr><b>Set</b></td>
  <td></td><td>Yes</td>
  <td></td><td>Yes</td>
  <td></td><td>Yes</td>
  <td></td><td>Yes</td>
</tr>
<tr valign=top>
  <td><nobr><b>Bag</b></td>
  <td></td><td>Yes</td>
  <td></td><td>Yes</td>
  <td></td><td>Yes</td>
  <td></td><td>No</td>
</tr>
<tr valign=top>
  <td><nobr><b>List</b></td>
  <td></td><td>Yes</td>
  <td></td><td>No</td>
  <td></td><td>No</td>
  <td></td><td>No</td>
</tr>
</table>
<p>
Arrays and Lists are similar &nbsp; <small>(e.g. could view Array as fixed-size List)</small>
</DIV>
<hr>
<DIV id="s23">
<div class='heading'>ODL Types <span style="font-size:67%">(cont)</span></div>
<p>
Examples of structured type definitions:
<p><pre>
<span class='comment'>// Can be used as types for attributes</span>

List&lt;real&gt;
Array&lt;string, 20&gt;
Set&lt;integer&gt;
Bag&lt;Enum Colour&gt;
List&lt;Array&lt;Set&lt;integer&gt;, 10>&gt;>

<span class='comment'>// Cannot be used as types for attributes</span>

List&lt;People&gt;
Set&lt;Company&gt;
List&lt;Set&lt;People>&gt;>
</pre><p>
</DIV>
<hr>
<DIV id="s24">
<div class='heading'>ODL Types <span style="font-size:67%">(cont)</span></div>
<p>
One other structured data type builds tuples &nbsp; (cf. C's <large><code>struct</code></large>).
<p><pre>
Struct <i>Name</i> {
  <i>Type<sub>1</sub> FieldName<sub>1</sub></i>,
  <i>Type<sub>2</sub> FieldName<sub>2</sub></i>,
  ...
  <i>Type<sub>n</sub> FieldName<sub>n</sub></i>,
}
</pre><p>
Examples:
<p><pre>
Struct Date {integer day, integer month, integer year}
Struct Name {string family, string given}
Struct Address {integer number, string street, ...}
</pre><p>
</DIV>
<hr>
<DIV id="s25">
<div class='heading'>Relationships</div>
<p>
<font color='#0000BB'>Relationships</font> describe connections between objects (classes).
<p>
A relationship is defined in a class <i>C</i> by:
<ul>
<li> naming the class <i>D</i> to which it is related
<li> describing the kind of relationship between <i>C</i> and <i>D</i> &nbsp; <small>(details to follow)</small>
<li> giving a name to the relationship
<li> specifying the inverse relationship (defined in <i>D</i>)
</ul>
Syntax for relationship declarations:
<p><pre>
relationship <i>Collection(D)</i> <i>RelName</i> inverse <i>D</i>::<i>InverseRelName</i>
</pre><p>
</DIV>
<hr>
<DIV id="s26">
<div class='heading'>Relationships <span style="font-size:67%">(cont)</span></div>
<p>
<b>Example:</b> <br>
- employees work in a company; may work on many projects <br>
- each project requires several employees to get it completed
<p><pre>
interface Employee { ...
  relationship Company WorksFor;
  relationship Set&lt;Project&gt; WorksOn;
};
interface Company { ...
  relationship Set&lt;Employee&gt; Employs;
};
interface Project { ...
  relationship Set&lt;Employee&gt; Involves;
};
</pre><p>
</DIV>
<hr>
<DIV id="s27">
<div class='heading'>Relationships <span style="font-size:67%">(cont)</span></div>
<p>
Example (with inverses included):
<p><pre>
interface Employee { ...
  relationship Company WorksFor
    <font color='#0000BB'>inverse Company::Employs;</font>
  relationship Set&lt;Project&gt; WorksOn
    <font color='#0000BB'>inverse Project::Involves;</font>
};
interface Company { ...
  relationship Set&lt;Employee&gt; Employs
    <font color='#0000BB'>inverse Employee::WorksFor;</font>
};
interface Project { ...
  relationship Set&lt;Employee&gt; Involves
    <font color='#0000BB'>inverse Employee::WorksOn;</font>
};
</pre><p>
</DIV>
<hr>
<DIV id="s28">
<div class='heading'>Relationships <span style="font-size:67%">(cont)</span></div>
<p>
Example (family trees):
<p><pre>
interface Person {
  attribute string name;
  attribute Date   birthday;
  ...
  relationship Person FatherIs
    inverse Person::FatherOf;
  relationship Set&lt;Person&gt; FatherOf
    inverse Person::FatherIs;
  ...
  relationship Set&lt;Person&gt; Children
    inverse Person::BiologicalParent;
  relationship Array&lt;Person,2&gt; BiologicalParents
    inverse Person::Children;
  ...
  relationship Set&lt;Person&gt; Raised
    inverse Person::RaisedBy;
  relationship Set&lt;Person&gt; RaisedBy
    inverse Person::Raised;
  ...
  relationship Person BestFriend
    inverse Person::BestFriend;
};
</pre><p>
Notes:
<ul>
<li> an object in class <i>C</i> can be related other objects in class <i>C</i>
<li> relationships have different <font color='#0000BB'>multiplicities</font>
</ul>
</DIV>
<hr>
<DIV id="s29">
<div class='heading'>Relationship Multiplicity</div>
<p>
An important property of relationships:
<ul>
<li> how many objects is a given object <i>Obj</i> related to under relationship <i>R</i> ?
</ul>
Possibilities:
<ul>
<li> related to exactly one other &nbsp; <small>(e.g. <large><code>FatherIs</code></large>)</small>
<li> related to exactly <i>n</i> other &nbsp; <small>(e.g. <large><code>BiologicalParents</code></large>)</small>
<li> related to many others &nbsp; <small>(e.g. <large><code>Children</code></large>)</small>
</ul>
Similarly for <i>R</i>'s inverse relationship <i>R<sup>-1</sup></i>.
</DIV>
<hr>
<DIV id="s30">
<div class='heading'>Relationship Multiplicity <span style="font-size:67%">(cont)</span></div>
<p>
Consider classes <i>C</i>, <i>D</i>, and relationships <i>R</i>, <i>R<sup>-1</sup></i> between them.
<p>
The most common <font color='#0000BB'>relationship multiplicities</font>:
<p>
<div class='center'>
<p><table border='0' cellpadding='6'>
<tr valign=top>
  <td><nobr><font color='#0000BB'>many-to-many</font></td>
  <td></td><td><i>C &rarr; R &rarr; D</i> &nbsp; is a set of objects <br>
	<i>D &rarr; R<sup>-1</sup> &rarr; C</i> &nbsp; is a set of objects
  </td>
</tr>
<tr valign=top>
  <td><nobr><font color='#0000BB'>many-to-one</font></td>
  <td></td><td><i>C &rarr; R &rarr; D</i> &nbsp; is a single object <br>
	<i>D &rarr; R<sup>-1</sup> &rarr; C</i> &nbsp; is a set of objects
  </td>
</tr>
<tr valign=top>
  <td><nobr><font color='#0000BB'>one-to-one</font></td>
  <td></td><td><i>C &rarr; R &rarr; D</i> &nbsp; is a single object <br>
	<i>D &rarr; R<sup>-1</sup> &rarr; C</i> &nbsp; is a single object
  </td>
</tr>
</table><p>
</div>
</DIV>
<hr>
<DIV id="s31">
<div class='heading'>ODL Model for Bank</div>
<p>
Kinds of objects:
<ul>
<li> name, address, date, ...
<li> customer, account, branch, transaction, ...
</ul>
Some we can model via user-defined types:
<p><pre>
Struct Name { string family, string given };
Struct Address {
  integer number;
  string  street;
  string  suburb;
  integer postcode;
};
Enum Activity { deposit, withdrawal };
Enum AcctType { savings, cheque, credit }; 
</pre><p>
</DIV>
<hr>
<DIV id="s32">
<div class='heading'>ODL Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Modelling people:
<p><pre>
interface Person {
  attribute Struct Name name;
  attribute Struct Address address;
};

interface Employee : Person {
  attribute int employeeNo;
  attribute float salary;
  relationship Branch WorskAt
    inverse Branch::Staff;
};

interface Manager : Employee {
  relationship Branch Manages
    inverse Branch::ManagedBy;
};
</pre><p>
</DIV>
<hr>
<DIV id="s33">
<div class='heading'>ODL Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Modelling branches:
<p><pre>
interface Branch {
  attribute integer branchNo;
  attribute string name;
  attribute Struct Address address;
  attribute float assets;
  ...
  relationship Set&lt;Customer&gt; Customers
    inverse Customer::HomeBranch;
  relationship Set&lt;Account&gt; Accounts
    inverse Account::HeldAt;
};
</pre><p>
</DIV>
<hr>
<DIV id="s34">
<div class='heading'>ODL Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Modelling accounts:
<p><pre>
interface Account {
  attribute integer accountNo; 
  attribute float balance;
  ...
  relationship Branch HeldAt
    inverse Branch:Accounts;
  relationship Set&lt;Customer&gt; Owners
    inverse Customers::Accounts;
  relationship List&lt;Transaction&gt; Transactions
    inverse Transaction::TransAcct;
};
</pre><p>
</DIV>
<hr>
<DIV id="s35">
<div class='heading'>ODL Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Modelling transactions:
<p><pre>
interface Transaction {
  attribute Enum Activity type;
  attribute Date when;
  attribute float amount;
  ...
  relationship Account TransAcct
    inverse Account::Transactions;
  relationship Customer MadeBy
    inverse Customer::Transactions;
};
</pre><p>
</DIV>
<hr>
<DIV id="s36">
<div class='heading'>ODL Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Modelling people <small>(cont)</small>:
<p><pre>
interface Customer : Person {
  attribute int customerNo;
  attribute Date memberFrom;
  ...
  relationship Branch HomeBranch
    inverse Branch::Customers;
  relationship Set&lt;Account&gt; Holds
    inverse Account::HeldBy;
  relationship List&lt;Transaction&gt; Transactions
    inverse Transaction::MadeBy;
};
</pre><p>
</DIV>
<hr>
<DIV id="s37">
<div class='section'>&#8750;  Entity-Relationship (ER) Model</div>
<p>
</DIV>
<hr>
<DIV id="s38">
<div class='heading'> Entity-Relationship Data Modelling</div>
<p>
The world is viewed as a collection of <font color="#009900">inter-related</font> <font color="#000099">entities</font>.
<p>
Goal of ER modelling:
<ul>
<li> a notation for describing entities and their relationships
<li> abstract/graphical <i>&rArr;</i> used between developers/clients
</ul>
Examples of entities:
	&nbsp; John Shepherd, his car, K17, ...
<p>
Example of relation:
	&nbsp; John Shepherd <font color="#0000EE">owns</font> his car
</DIV>
<hr>
<DIV id="s39">
<div class='heading'> Entity-Relationship Data Modelling <span style="font-size:67%">(cont)</span></div>
<p>
Each entity is described by:
<ul>
<li> a collection of attributes that model "properties of interest"
</ul>
Examples:
<ul>
<li> Person = (Name, TaxFileNum, DateOfBirth, Citizenship) <br>
	e.g. (John, 2233456789, 12-Feb-1978, Australian)
<li> Car = (Make, Model, Year, Colour, Registration)  <br>
	e.g. (Ford, Laser, 1990, Red, JAS-007)
</ul>
An <font color='#0000BB'>entity set</font> is a collection of entities with similar properties.
</DIV>
<hr>
<DIV id="s40">
<div class='heading'> Entity-Relationship Data Modelling <span style="font-size:67%">(cont)</span></div>
<p>
Analogy between ER and OO models:
<ul>
<li> an <font color="#009900">entity</font> is like an <font color="#000099">object</font>
<li> an <font color="#009900">entity set</font> is like a <font color="#000099">class</font>
</ul>
Differences between ER and OO models:
<ul>
<li> entities don't have OIDs to distinguish them
<li> ER modelling doesn't consider operations (methods)
</ul>
</DIV>
<hr>
<DIV id="s41">
<div class='heading'> Entity-Relationship Data Modelling <span style="font-size:67%">(cont)</span></div>
<p>
The entity-relationship model has existed for almost 30 years.
<p>
<small>(Original description: Chen, <i>ACM Transactions on Database Systems</i>, 1(1), 1976) </small>
<p>
It was never standardised, but has been well-used ...
<ul>
<li> so, unfortunately, many variations exist <br>
<small>
(major variations involve relationship cardinalities and OO extensions)
</small>
</ul>
In lectures, we use the notation from the KSS book.
<p>
Other texts (EN, GUW, RG) use slightly different notation.
<p>
Choose whichever <b>one</b> you like, and use it consistenly.
</DIV>
<hr>
<DIV id="s42">
<div class='heading'> Entity-Relationship (ER) Diagrams</div>
<p>
<font color='#0000BB'>ER diagrams</font> are a graphical tool for data modelling.
<p>
An ER diagram consists of:
<ul>
<li> a collection of <font color='#0000BB'>entity set</font> definitions
<li> a collection of <font color='#0000BB'>relationship set</font> definitions
<li> <font color='#0000BB'>attributes</font> associated with entity and relationship sets
<li> connections between entity and relationship sets 
</ul>
<font color="#CC0000"><b>Warning</b></font>: 99% of the time ...
<ul>
<li> we say "entity" when we mean "entity set"
<li> we say "relationship" when we mean "relationship set"
</ul>
If we want to refer to a specific entity, we generally say "entity instance".
</DIV>
<hr>
<DIV id="s43">
<div class='heading'> Entity-Relationship (ER) Diagrams <span style="font-size:67%">(cont)</span></div>
<p>
Specific visual symbols indicate different ER design elements:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/er-symbols.png]" src="Pic/er-rel/er-symbols.png">
</div><p>
</DIV>
<hr>
<DIV id="s44">
<div class='heading'> Entity-Relationship (ER) Diagrams <span style="font-size:67%">(cont)</span></div>
<p>
Example ER diagram <small>(details explained below)</small>:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/er1.png]" src="Pic/er-rel/er1.png">
</div><p>
</DIV>
<hr>
<DIV id="s45">
<div class='heading'>Attributes</div>
<p>
Each <font color='#0000BB'>attribute</font> in an ER diagram:
<ul>
<li> has a <font color='#0000BB'>name</font> <small>(which appears on the ER diagram)</small>
<li> is associated with an entity or relationship set
<li> has an underlying <font color='#0000BB'>domain</font> (type) 
</ul>
Information about attribute domains
<ul>
<li> is not presented on the ER diagram
<li> supplied separately via some other formalism (e.g. SQL)
</ul>
</DIV>
<hr>
<DIV id="s46">
<div class='heading'>Attributes <span style="font-size:67%">(cont)</span></div>
<p>
<font color='#0000BB'>Simple</font> attributes are drawn from atomic value domains.
<p align=right> 
<small>(cf. ODL's atomic data types)</small>
<p>
<font color='#0000BB'>Composite</font> attributes consist of a hierarchy of attributes.
<p align=right>
<small>(cf. ODL's <large><code>Struct</code></large> types)</small>
<p>
<font color='#0000BB'>Single-valued</font> attributes have one value for each entity.
<p align=right>
<small>(cf. ODL's atomic or <large><code>Struct</code></large> types)</small>
<p>
<font color='#0000BB'>Multivalued</font> attributes have a set of values for each entity.
<p align=right>
<small>(cf. ODL's collection types)</small>
</DIV>
<hr>
<DIV id="s47">
<div class='heading'>Attributes <span style="font-size:67%">(cont)</span></div>
<p>
<font color='#0000BB'>Null</font> attributes may contain a distinguished <large><code>null</code></large> value to indicate:
<ul>
<li> the attribute is not relevant for a particular entity
	<br><small>(e.g. a customer under 18 would not have a credit card number)</small>
<li> the value of the attribute is unknown for a particular entity
	<br><small>(e.g. don't know someone's address or phone number)</small>
</ul>
<font color='#0000BB'>Derived</font> attributes contain values that are calculated from other attributes.
<p align=right>
<small>(e.g. a person's age may be computed given their date of birth)</small>
</DIV>
<hr>
<DIV id="s48">
<div class='heading'>Attributes <span style="font-size:67%">(cont)</span></div>
<p>
Example of attribute notations:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/erattrs.png]" src="Pic/er-rel/erattrs.png">
</div><p>
</DIV>
<hr>
<DIV id="s49">
<div class='heading'>Entity Sets</div>
<p>
An <font color='#0000BB'>entity set</font> can be viewed as either:
<ul>
<li> a set of entities with the same set of attributes <br>
	<small>(<font color='#0000BB'>extensional view</font> of entity set)</small>
<li> an abstract description of a class of entities <br>
	<small>(<font color='#0000BB'>intensional view</font> of entity set)</small>
</ul>
Entity sets are not necessarily disjoint.
<p align=right>
<small>
(e.g. a person may be both a <large><code>Customer</code></large> and <large><code>Employee</code></large> of a bank)
</small>
<p>
The "raw data" in a database may be viewed as a collection of entity sets.
</DIV>
<hr>
<DIV id="s50">
<div class='heading'>Keys</div>
<p>
ER model does not have a notion of OIDs, so how to distinguish entities?
<p>
What if two entities have the same set of attribute values?
<p>
They're regarded as the same entity.
<p>
So, each entity must have a distinct set of attribute values.
<p>
<p>
Implications:
<ul>
<li> it is not possible to distinguish two separate real-world entities
	if their set of attribute values is identical
<li> since it is necessary to distinguish entities, we need to be careful
	about how we choose attributes
</ul>
</DIV>
<hr>
<DIV id="s51">
<div class='heading'>Keys <span style="font-size:67%">(cont)</span></div>
<p>
One approach to ensuring that attribute value sets are distinct:
<ul>
<li> add a new attribute to each entity
<li> containing a unique value for each entity in the entity set
</ul>
<small>
(like re-introducing OIDs, but they only need to be distinct within an entity set)
</small>
<p>
This approach is used commonly in practice e.g.
<ul>
<li> social security number (SSN)
	&nbsp; <small>(distinct for all residents of USA)</small>
<li> tax file number (TFN)
	&nbsp; <small>(distinct for all Australian taxpayers)</small>
<li> UNSW student id
	&nbsp; <small>(distinct for all students at UNSW)</small>
</ul>
This is a specific example of the more general notion of a <font color='#0000BB'>key</font>.
</DIV>
<hr>
<DIV id="s52">
<div class='heading'>Keys <span style="font-size:67%">(cont)</span></div>
<p>
A <font color='#0000BB'>superkey</font> is
<ul>
<li> a set of one or more attributes for an entity set
<li> whose values are distinct for all entities in that set
</ul>
<small>(i.e. a set of values for superkey attributes
identifies at most one entity in the set)</small>
<p>
The notion of superkey is a property of the whole entity set (extension).
<p>
During design, we typically consider keys relative to all possible extensions.
</DIV>
<hr>
<DIV id="s53">
<div class='heading'>Keys <span style="font-size:67%">(cont)</span></div>
<p>
Example (bank customer entities):
<p><pre>
Customer=(custNo,name,address,taxFileNo)
</pre><p>
Definite superkeys:
<ul>
<li> any set of attributes involving <large><code>custNo</code></large> or <large><code>taxFileNo</code></large>
</ul>
Possible superkeys:
<ul>
<li> <large><code>(name,address)</code></large>
</ul>
Unlikely superkeys:
<ul>
<li> <large><code>(name)</code></large>, &nbsp; <large><code>(address)</code></large>
</ul>
</DIV>
<hr>
<DIV id="s54">
<div class='heading'>Keys <span style="font-size:67%">(cont)</span></div>
<p>
The entire set of attributes is always a superkey.
<p>
However, most entity sets have several superkeys.
<p>
E.g. <large><code>(custNo,name)</code></large>, <large><code>(custNo,address)</code></large>, ... 
<p>
It would be convenient to have just one key to identify entities.
<p>
Can we identify a minimal set of attributes to be <b>the</b> key?
<p>
In examples with artificial identifiers (e.g. SSN), use identifier.
<p>
In other examples ... ?
</DIV>
<hr>
<DIV id="s55">
<div class='heading'>Keys <span style="font-size:67%">(cont)</span></div>
<p>
A <font color='#0000BB'>candidate key</font> is any superkey such that
<ul>
<li> no proper subset of its attributes is also a superkey
</ul>
E.g. <large><code>(custNo)</code></large>, <large><code>(taxFileNo)</code></large>, <large><code>(name,address)</code></large>, ...
<p>
A <font color='#0000BB'>primary key</font>:
<ul>
<li> is a candidate key chosen by the database designer
<li> to be used as the identifying mechanism for the entity set
</ul>
A <font color='#0000BB'>composite key</font> is a key with two or more attributes.
</DIV>
<hr>
<DIV id="s56">
<div class='heading'>Keys <span style="font-size:67%">(cont)</span></div>
<p>
Keys are indicated in ER diagrams by underlining the key attributes.
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/keys.png]" src="Pic/er-rel/keys.png">
</div><p>
</DIV>
<hr>
<DIV id="s57">
<div class='heading'>Relationship Sets</div>
<p>
A <font color='#0000BB'>relationship</font> is an association among several entities.
<p>
E.g. Customer(9876) &nbsp; <font color='#0000BB'>is the owner of</font> &nbsp; Account(12345)
<p>
A <font color='#0000BB'>relationship set</font> is a collection of relationships of the same type.
<p>
E.g. the "<font color='#0000BB'>is the owner of</font>" relationship set
<p>
Customer(9876) &nbsp; <font color='#0000BB'>is the owner of</font> &nbsp; Account(12345) <br>
Customer(9426) &nbsp; <font color='#0000BB'>is the owner of</font> &nbsp; Account(54321) <br>
Customer(9511) &nbsp; <font color='#0000BB'>is the owner of</font> &nbsp; Account(88888) <br>
Customer(9303) &nbsp; <font color='#0000BB'>is the owner of</font> &nbsp; Account(78787) <br>
etc. etc.
</DIV>
<hr>
<DIV id="s58">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
Stated more formally:
<ul>
<li> consider <i>n &ge; 2</i> entity sets <i>E<sub>1</sub>, E<sub>2</sub>, ... E<sub>n</sub></i> &nbsp; <small>(possibly non-distinct)</small>
<li> a <font color='#0000BB'>relationship</font> is a tuple
	<i>(e<sub>1</sub>, e<sub>2</sub>, ... e<sub>n</sub>)</i>
	<i>&isin; E<sub>1</sub> &times; E<sub>2</sub> &times; ... &times; E<sub>n</sub></i>
<li> a <font color='#0000BB'>relationship set</font> <i>R</i> is a subset of
	<i>E<sub>1</sub> &times; E<sub>2</sub> &times; ... &times; E<sub>n</sub></i>
<li> entity sets <i>E<sub>1</sub>, E<sub>2</sub>, ... E<sub>n</sub></i>
	<font color='#0000BB'>participate</font> in <i>R</i>, &nbsp; <i>R</i> has <font color='#0000BB'>degree</font> <i>n</i>
</ul>
ER relationships' degree <i>&ge; 2</i>
</DIV>
<hr>
<DIV id="s59">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
In an ER diagram, relationship sets are assigned names.
<p>
The <font color='#0000BB'>role</font> of each entity in the relationship is usually implicit.
<p>
Roles can be explicitly named if needed &nbsp; <small>(in red below)</small>
<p>
Examples:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/erroles.png]" src="Pic/er-rel/erroles.png">
</div><p>
</DIV>
<hr>
<DIV id="s60">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
<font color='#0000BB'>Mapping cardinalities</font> describe the number of entities that a
given entity can be associated with via a relationship.
<p>
A binary relationship set <i>R</i> between entity sets <i>A</i> and <i>B</i>
may be (assuming &nbsp; <i>a &isin; A</i>, &nbsp; <i>b &isin; B</i>):
<p>
<p><table border='0' cellpadding='6'>
<tr valign=top>
  <td><nobr><font color='#0000BB'>one-to-one</font></td>
  <td></td><td>each <i>a</i> is associated with at most one <i>b</i> <br>
	each <i>b</i> is associated with at most one <i>a</i>
  </td>
</tr>
<tr valign=top>
  <td><nobr><font color='#0000BB'>one-to-many</font></td>
  <td></td><td>each <i>a</i> is associated with zero or more <i>b</i> <br>
	each <i>b</i> is associated with at most one <i>a</i>
  </td>
</tr>
<tr valign=top>
  <td><nobr><font color='#0000BB'>many-to-one</font></td>
  <td></td><td>each <i>a</i> is associated with at most one <i>b</i> <br>
	each <i>b</i> is associated with zero or more <i>a</i>
  </td>
</tr>
<tr valign=top>
  <td><nobr><font color='#0000BB'>many-to-many</font></td>
  <td></td><td>each <i>a</i> is associated with zero or more <i>b</i> <br>
	each <i>b</i> is associated with zero or more <i>a</i>
  </td>
</tr>
</table><p>
</DIV>
<hr>
<DIV id="s61">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
Examples:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/cardinal.png]" src="Pic/er-rel/cardinal.png">
</div><p>
<p>
An arrow from <i>A</i> to <i>B</i> indicates that there is at most one 
<i>b &isin; B</i> for each <i>a &isin; A</i>.
</DIV>
<hr>
<DIV id="s62">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
An alternative notation makes cardinalities explicit:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/cardinal2.png]" src="Pic/er-rel/cardinal2.png">
</div><p>
</DIV>
<hr>
<DIV id="s63">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
<font color='#0000BB'>Level of participation</font> is another type of relationship constraint.
<p>
Participation in relationship set <i>R</i> by entity set <i>A</i> may be:
<p>
<p><table border='0' cellpadding='6'>
<tr valign=top>
  <td><nobr><font color='#0000BB'>total</font></td>
  <td></td><td>every <i>a &isin; A</i> participates in <i>&ge;1</i> relationship in <i>R</i>
  </td>
</tr>
<tr valign=top>
  <td><nobr><font color='#0000BB'>partial</font></td>
  <td></td><td>only some <i>a &isin; A</i> participate in relationships in <i>R</i>
  </td>
</tr>
</table><p>
<p>
Example:
<ul>
<li> every bank loan is associated with at least one customer
<li> not every customer in a bank has a loan
</ul>
</DIV>
<hr>
<DIV id="s64">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
In ER diagrams:
<ul>
<li> partial participation is denoted by single lines
<li> total participation is denoted by double lines (or <b>thick</b> lines)
</ul>
Example:
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/particip.png]" src="Pic/er-rel/particip.png">
</div><p>
</DIV>
<hr>
<DIV id="s65">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
In the x-to-one and one-to-x relationships above, we noted that e.g.
<p>
<div class='center'>
 "Each <i>a &isin; A</i> is associated with <font color="#009900">at most one</font> <i>b &isin; B</i>"
</div>
<p>
Sometimes, we require that there <font color="#009900">must</font> be <font color="#009900">exactly one</font> associated entity.
<p>
<small>E.g. a manager must have a branch to manage, but a branch may (temporarily) have no manager.</small>
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/refinteg.png]" src="Pic/er-rel/refinteg.png">
</div><p>
<p>
This is known as a <font color='#0000BB'>referential integrity constraint</font>.
</DIV>
<hr>
<DIV id="s66">
<div class='heading'>Relationship Sets <span style="font-size:67%">(cont)</span></div>
<p>
In some cases, a relationship needs associated attributes.
<p>
Example:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/relattr.png]" src="Pic/er-rel/relattr.png">
</div><p>
<p>
<small>(Price and quantity are related to products in a particular store)</small>
</DIV>
<hr>
<DIV id="s67">
<div class='heading'>Weak Entity Sets</div>
<p>
<font color='#0000BB'>Weak entities</font> exist only because of association with other entities.
<p>
Examples:
<ul>
<li> family of employees in a company <br>
	<small>(would not be interested in the family once the employee leaves)</small>
<li> payments on bank loans <br>
	<small>(if there were no loans, no need to keep information about payments)</small>
</ul>
Weak entities
<ul>
<li> do not have a primary key (or any superkey)
<li> have a subset of attributes that form a <font color='#0000BB'>discriminator</font>
<li> need to be considered in conjunction with strong entities
</ul>
</DIV>
<hr>
<DIV id="s68">
<div class='heading'>Weak Entity Sets <span style="font-size:67%">(cont)</span></div>
<p>
While weak entities do not have a primary key
<ul>
<li> they have a subset of attributes that form a <font color='#0000BB'>discriminator</font>
</ul>
We can can form a primary key by taking a combination of
<ul>
<li> the set of values for the discriminator
<li> the primary key of the associated strong entity
</ul>
Example:
<ul>
<li> Ian's son called Tim is different to Paul's son called Tim
</ul>
</DIV>
<hr>
<DIV id="s69">
<div class='heading'>Weak Entity Sets <span style="font-size:67%">(cont)</span></div>
<p>
E.g. employees/family, with name as a "key" ...
<p><pre><small>
Employees = {Anne, John, Liam}
Families  = {Alice, Bob, David, Jane, Mary, <font color="#009900">Tim</font>, <font color="#0000EE">Tim</font>}
John's family = {Alice, Bob, Mary, <font color="#009900">Tim</font>}
Anne's family = {David, <font color="#0000EE">Tim</font>}
Liam's family = {Jane}
</small></pre><p>
<p>
E.g. loans/payments, with loan ids and payment sequence ...
<p><pre><small>
Loan        = {(1234,John,100000),(4321,Arun,70000)}
Payments    = {(1,1500),(2,1500),(3,1500),(1,750),(2,1500)}
John's payments = {(<font color="#CC0000">1</font>,1500),(<font color="#CC0000">2</font>,1500),(<font color="#CC0000">3</font>,1500)}
Arun's payments = {(<font color="#CC0000">1</font>,750),(<font color="#CC0000">2</font>,1500)}
</small></pre><p>
</DIV>
<hr>
<DIV id="s70">
<div class='heading'>Weak Entity Sets <span style="font-size:67%">(cont)</span></div>
<p>
In ER diagrams:
<ul>
<li> weak entities are denoted by double-boxes
<li> strong/weak entity relationships are denoted by double-diamonds
<li> discriminators are denoted by dotted underline
</ul>
Example:
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/weakent.png]" src="Pic/er-rel/weakent.png">
</div><p>
</DIV>
<hr>
<DIV id="s71">
<div class='heading'>Subclasses and Inheritance</div>
<p>
Extensions to the "standard" ER model include inheritance.
<p>
A <font color='#0000BB'>subclass</font> of an entity set <i>A</i> is a set of entities:
<ul>
<li> with all of the attributes found in entities of <i>A</i>
<li> with (generally) additional attributes of its own
<li> that is involved in all of the relationships involving <i>A</i>
<li> may be involved in additional relationships on its own
</ul>
In other words, the subclass <font color='#0000BB'>inherits</font> the attributes and relationships of <i>A</i>.
<p>
<small>
Some texts use the term <font color='#0000BB'>lower level entity set</font> as synonym for "subclass".
</small>
</DIV>
<hr>
<DIV id="s72">
<div class='heading'>Subclasses and Inheritance <span style="font-size:67%">(cont)</span></div>
<p>
If an entity set has multiple subclasses, they may be:
<ul>
<li> <font color='#0000BB'>disjoint</font> - an entity belongs to at most one subclass
<li> <font color='#0000BB'>overlapping</font> - an entity may belong to several subclasses
</ul>
An orthogonal property is the <font color='#0000BB'>completeness contraint</font>:
<ul>
<li> <font color='#0000BB'>total</font> - all entities must belong to at least one subclass
<li> <font color='#0000BB'>partial</font> - some entities may belong to no subclass
</ul>
ER diagrams use the following notation:
<ul>
<li> subclass denoted by <large><code>ISA</code></large> or subset symbol on line
<li> disjoint/overlapping = the letter <large><code>'d'</code></large>/<large><code>'o'</code></large> in a circle
<li> total/partial completeness = double(thick)/normal line
</ul>
</DIV>
<hr>
<DIV id="s73">
<div class='heading'>Subclasses and Inheritance <span style="font-size:67%">(cont)</span></div>
<p>
Example of subclasses:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/inherit.png]" src="Pic/er-rel/inherit.png">
</div><p>
</DIV>
<hr>
<DIV id="s74">
<div class='heading'>Design Using the ER Model</div>
<p>
The ER model provides a powerful, general set of data modelling tools.
<p>
Some considerations in using these tools to create a design:
<ul>
<li> should an "object" be represented by an attribute or entity?
<li> is a "concept" best expressed as an entity or relationship?
<li> should we use <i>n</i>-way relationship or several 2-way relationships?
<li> is an "object" a strong or weak entity?
<li> are there subclasses/superclasses within the entities?
</ul>
</DIV>
<hr>
<DIV id="s75">
<div class='heading'>Design Using the ER Model <span style="font-size:67%">(cont)</span></div>
<p>
Attribute vs Entity Example (v1)
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/attr-ent1.png]" src="Pic/er-rel/attr-ent1.png">
</div><p>
<p>
<small>Employees can work for several departments, but cannot work for the same department over two different time periods.</small>
</DIV>
<hr>
<DIV id="s76">
<div class='heading'>Design Using the ER Model <span style="font-size:67%">(cont)</span></div>
<p>
Attribute vs Entity Example (v2)
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/attr-ent2.png]" src="Pic/er-rel/attr-ent2.png">
</div><p>
<p>
<small>Employees can work for the same department over two different time periods.</small>
</DIV>
<hr>
<DIV id="s77">
<div class='heading'>Design Using the ER Model <span style="font-size:67%">(cont)</span></div>
<p>
Design is initially somewhat fluid; no single "correct" answer.
<p>
Some design refinements:
<ul>
<li> an attribute might be used in several entities <br>
	 <i>&rarr;</i> attribute becomes new entity+relationships
<li> entity used via simple relationship to one other entity <br>
	<i>&rarr;</i> entity becomes attribute of other entity
</ul>
The texts discuss design issues relatively briefly.
<p>
Other texts discuss design in more detail
	&nbsp; <small>(e.g. Conolly/Begg)</small>
<p>
To some extent, it's a case of "learn by practising"
</DIV>
<hr>
<DIV id="s78">
<div class='heading'>ER Model for Bank</div>
<p>
Kinds of information in model:
<ul>
<li> attributes: name, address, date, dollar amount, ...
<li> entities: customer, account, branch, transaction, ...
<li> relationships: holds, worksAt, manages, ...
</ul>
How to give a model?
<ul>
<li> detailed description of attribute domains
<li> detailed description of entities <small>(maybe SQL notation)</small>
<li> detailed description of relationships <small>(especially constraints)</small>
<li> ER diagram showing how it all "fits together"
</ul>
</DIV>
<hr>
<DIV id="s79">
<div class='heading'>ER Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
ER diagrams are typically too large to fit on a single screen. <br>
<small>(or a single sheet of paper, if printing)</small>
<p>
One commonly used strategy:
<ul>
<li> define entity sets separately, showing attributes
<li> if relationships have attributes, treat similarly
<li> combine entitities and relationships on a single diagram <br>
	<small>(without attributes)</small>
<li> if very large design, may use several linked diagrams
</ul>
</DIV>
<hr>
<DIV id="s80">
<div class='heading'>ER Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Modelling people:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/bank1.png]" src="Pic/er-rel/bank1.png">
</div><p>
</DIV>
<hr>
<DIV id="s81">
<div class='heading'>ER Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Modelling people <small>(cont)</small>:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/bank2.png]" src="Pic/er-rel/bank2.png">
</div><p>
</DIV>
<hr>
<DIV id="s82">
<div class='heading'>ER Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Modelling branches, accounts, transactions:
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/bank3.png]" src="Pic/er-rel/bank3.png">
</div><p>
</DIV>
<hr>
<DIV id="s83">
<div class='heading'>ER Model for Bank <span style="font-size:67%">(cont)</span></div>
<p>
Putting it all together with relationships ...
<p>
<p><div align='center'>
<img alt="[Diagram:Pic/er-rel/bank4.png]" src="Pic/er-rel/bank4.png">
</div><p>
</DIV>
<hr>
<DIV id="s84">
<div class='heading'>Limitations of ER Model</div>
<p>
There are some design aspects that ER does not deal with:
<ul>
<li> attribute domains <br>
	&nbsp; <small>e.g. should phone "number" be represented by number or string?</small>
<li> computational dependencies <br>
	&nbsp; <small>e.g. employee's salary is determined by department and level</small>
<li> general constraints <br>
	&nbsp; <small>e.g. manager's budget is less than 10% of the combined budget of all departments they manage</small>
</ul>
Some of these are handled later in the relational model.
</DIV>
<hr>
<DIV id="s85">
<div class='heading'>Summary</div>
<p>
<font color='#0000BB'>Conceptual design</font> (data modelling) follows requirements analysis.
<p>
ER model is popular for doing coneptual design
<ul>
<li> has good expressive power, close to how we think
</ul>
Basic constructs: <font color='#0000BB'>entities, relationships, attributes</font>
<p>
Additional constructs: <font color='#0000BB'>weak entities, ISA hierarchies</font>
<p>
Many notational variants of ER exist <br>
<small>(especially in the expression of constraints on relationships)</small>
</DIV>
<p><hr><p>
<span style='font-size:11px;color: grey;'>Produced: 13 Sep 2020</span>
 <script src='lib/prism.js'></script>   
 <script src='lib/sg.js'></script>   
</body>
</html>
